\pagestyle{empty}
\chapter{Preliminares}\label{cap:preliminares}
\pagestyle{headings}

\bigdrop{0pt}{5}{cmr10}A lo largo de este capítulo se van a introducir los principales conceptos, definiciones y resultados sobre los que se sustentan el trabajo de investigación desarrollado. Se parte una vez más de que el objetivo principal de la tesis doctoral es la utilización de los conjuntos de implicaciones para generar soluciones a problemas en el ámbito de FCA, bases de datos y sistemas de recomendación. Se ha diseñado este capítulo con la intención de que el texto sea autocontenido en la medida de lo posible y para ello, se ha dividido en cuatro secciones principales. 

La primera presenta las nociones de FCA que serán necesarias para las soluciones propuestas para generadores minimales y sistemas de recomendación. En la segunda, se recopilan los aspectos fundamentales a tener en cuenta para la enumeración de las claves minimales en esquemas relacionales por medio de implicaciones. La tercera parte se dedica a presentar formalmente la lógica utilizada. La cuarta y última, presenta el método de razonamiento automático y los algoritmos del cierre utilizados.



\section{Análisis Formal de Conceptos}
\label{sec:analisisFormalConceptos}
De forma general, se puede considerar FCA como un marco para el análisis de información que facilita la extracción de conocimiento y la posibilidad de poder razonar sobre él. La referencia principal de este campo de conocimiento viene de la mano de Wille y Ganter en \cite{Ganter1997}. Según el propio Wille en \cite{Wille2005}: \textit{``El objetivo y significado del análisis formal de conceptos como teoría matemática consiste en apoyar la comunicación racional de las personas, mediante el desarrollo de estructuras de conceptos matemáticamente apropiadas que puedan activarse lógicamente''}. Debido a su teoría formal elemental pero robusta, FCA puede utilizarse para expresar otros métodos, y por lo tanto tiene la capacidad de unificar la metodología de análisis de datos.

Como principales fortalezas de FCA cabe mencionar: su sólida base matemática y filosófica, una representación gráfica e intuitiva del conocimiento, más de 2.000 publicaciones científicas y aplicaciones en cientos de proyectos \cite{Wille2005} en diversos campos de conocimiento, como se ha mencionado en el Capítulo \ref{cap:introduccion}. 


\subsection{Contextos formales}
\label{subsec:contextosFormales}
El punto de partida de FCA es un \textit{contexto formal}\index{contexto formal} que se define a continuación.

\begin{definicion}[Contexto formal]
	Un contexto formal es una tripleta $K = (G,M,I)$ que consiste en dos conjuntos no vacíos, $G$ y $M$, y una relación binaria $I$ entre ellos. Los elementos de $G$ se llaman objetos del contexto, y los elementos de $M$ se llaman atributos del contexto. Para $g \in G$ y $m \in M$, escribimos $<g,m> \in I$ o $gIm$ si el objeto $g$ posee el atributo $m$.
\end{definicion}

La forma más sencilla de representar un contexto formal es mediante una tabla donde los objetos se sitúan en sus filas y los atributos en las columnas, de forma que un valor en cada celda indica si un objeto $g \in G$ posee un atributo $m \in M$. Hay que tener en cuenta que la definición de contexto formal es muy general. No hay restricciones sobre la naturaleza de los objetos y atributos. Se pueden considerar objetos físicos, personas, números, procesos, estructuras, etc. En realidad, cualquier cosa que sea un \textit{conjunto} en el sentido matemático se puede tomar como el conjunto de objetos o de atributos de algún contexto formal. También es posible intercambiar el papel de los objetos y atributos, es decir, si se tiene que $K = (G,M,I)$ es un contexto formal, igualmente lo será su dual, $K = (M,G,I^-1)$ con $mIg \Longleftrightarrow gIm$. Además, ni siquiera es necesario que $G$ y $M$ sean disjuntos, de hecho, pueden incluso no ser diferentes.

%\begin{ejemplo}
%	Se considera un ejemplo de contexto formal en el cual los objetos son hoteles, los atributos son diferentes servicios que ofrece el establecimiento y cada celda de la tabla indica si un objeto cumple un atributo. Por tanto, se tiene el contexto formal $\mathbf{K} = (G,M,I)$ en el cual:
%
%	G = \{Fuerte Estepona Suites, Hotel Buenavista, Hotel Paraíso, Apts Marriot Playa, Hotel Piedra Paloma, Hostal Hospedería V Cent\}
%
%	M = \{AC, Bar, Gimnasio, Internet, Masajes, Aparcamiento\}
%
%	La Tabla \ref{table:hotelsExtract} muestra la relación binaria $I$ utilizando información real de varios hoteles de la Costa del Sol.
%
%\begin{table*}[tb]
%\caption{Ejemplo de contexto formal utilizando datos reales del sector hotelero}
%\label{table:hotelsExtract} 
%\centering
%{\scriptsize
%\begin{tabular}{lccccccccc}
%\hline
% & AC & Bar & Gimnasio & Internet & Masajes & Aparcamiento\\
%\hline
%Fuerte Estepona Suites & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark\\
%Hotel Buenavista &  & \checkmark &  &  &  & \checkmark \\
%Hotel Paraíso & \checkmark & \checkmark &  &  &  & \checkmark \\
%Apts Marriot Playa &  &  &  & \checkmark &  &  \\
%Hotel Piedra Paloma &  & \checkmark &  &  &  & \checkmark \\
%Hostal Hospedería V Cent & \checkmark & \checkmark &  & \checkmark &  & \checkmark \\
%\hline
%\end{tabular}
%}
%\end{table*}
%
%	%Por tanto, se puede apreciar como el hotel \textit{Fuerte Estepona Suites} ofrece todos los servicios disponibles en el contexto, mientras que los \textit{Apts Marriot Playa} únicamente ofrecen el servicio de \textit{Internet}.
%\end{ejemplo}

Para ilustrar un ejemplo de contexto formal y como apoyo a los posteriores conceptos que se presentan en esta sección, se va a utilizar el siguiente ejemplo tomado de \cite{Ganter2002}. En él, los autores muestran un información sobre los destinos aéreos que oferta un grupo de aerolíneas comerciales.

\begin{ejemplo}
\label{ejemploContextoFormal}
	Se considera un ejemplo de contexto formal en cual el conjunto de objetos comprende todas las líneas aéreas del grupo Star Alliance y el conjunto de atributos muestra sus destinos.
	
	La relación binaria $I$ viene reflejada en la Tabla \ref{tabla:ejemploContextoFormal} y muestra los destinos a los que viaja cada miembro de Star Alliance. Por tanto, se tiene el contexto formal $K = (G,M,I)$ en el cual:

	G = \{Air Canada, Air New Zealand, All Nippon Airways, Ansett Australia, The Austrian Airlines Group, British Midland, Lufthansa, Mexicana, Scandinavian Airlines, Singapore Airlines, Thai Airways International, Unites Airlines, VARIG\}

	M = \{Latinoamérica, Europa, Canadá, Asia, Oriente Medio, África, México, Caribe, Estados Unidos\}

\begin{table*}[tb]
\caption{Ejemplo de contexto formal sobre los destinos aéreos del grupo Star Alliance \cite{Ganter2002}}
\label{tabla:ejemploContextoFormal} 
\centering
{\scriptsize
\begin{tabular}{lccccccccc}
\hline
 & \rotatebox{90}{Latinoamérica} & \rotatebox{90}{Europa} & \rotatebox{90}{Canadá} & \rotatebox{90}{Asia} & \rotatebox{90}{Oriente Medio} & \rotatebox{90}{África} & \rotatebox{90}{México} & \rotatebox{90}{Caribe} & \rotatebox{90}{Estados Unidos\ }\\
\hline
Air Canada & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark &  & \checkmark & \checkmark & \checkmark\\
Air New Zealand &  & \checkmark &   & \checkmark  & & & & & \checkmark \\
All Nippon Airways &  & \checkmark &   & \checkmark  & & & & & \checkmark \\
Ansett Australia  &  &  &   & \checkmark  & & & & & \\
The Austrian Airlines Group &  & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark &  &  & \checkmark\\
British Midland &  & \checkmark &  &  &  &  &  &  & \\
Lufthansa & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark &  & \checkmark\\
Mexicana & \checkmark &  & \checkmark &  &  &  & \checkmark & \checkmark & \checkmark\\
Scandinavian Airlines & \checkmark & \checkmark &  & \checkmark &  & \checkmark &  &  & \checkmark\\
Singapore Airlines &  & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark &  &  & \checkmark\\
Thai Airways International & \checkmark & \checkmark &  & \checkmark &  &  &  & \checkmark & \checkmark\\
Unites Airlines & \checkmark & \checkmark & \checkmark & \checkmark &  &  & \checkmark & \checkmark & \checkmark\\
VARIG & \checkmark & \checkmark &  & \checkmark &  & \checkmark & \checkmark &  & \checkmark\\
\hline
\end{tabular}
}
\end{table*}
\end{ejemplo}


\subsection{Operadores de derivación}
\label{subsec:operadoresDerivacion}
Dada una selección $A \subseteq G$ de objetos de un contexto formal $K = (G,M,I)$, se desea averiguar qué atributos de $M$ son comunes a todos estos objetos. Esto define un operador que produce para cada conjunto de objetos $A \subseteq G$, el conjunto $A$ de sus atributos comunes. Estos operadores se denominan operadores de derivación\index{operadores de derivación} para $K$.
 
\begin{definicion}[Operadores de derivación]
	Dado un contexto formal $K = (G,M,I)$, se definen los operadores de derivación:

$$
\begin{array}{ll}
(\ )'\colon 2^G  \to 2^M
&
(\ )'\colon 2^M  \to 2^G
\\[2mm]
A' = \{m \in M \mid g\I m  \quad \forall g \in A\}\qquad
&
B' = \{g \in G \mid g\I m  \quad \forall m \in B\}
\end{array}
$$
\end{definicion}

Ambas funciones se denotan con el mismo símbolo porque no hay lugar a confusión. El primero asigna a cada conjunto de objetos, el conjunto de atributos comunes a todos los objetos, y el segundo asigna, a cada conjunto de atributos, el conjunto de objetos que tienen todos estos atributos.

Si $A$ es un conjunto de objetos, entonces $A'$ es un conjunto de atributos, al cual podemos aplicar el segundo operador de derivación para obtener $A''$, un conjunto de objetos. De forma dual, comenzando con un conjunto $B$ de atributos, podemos formar el conjunto $B''$, que nuevamente es un conjunto de atributos. De esto se obtiene que:

\begin{proposicion}
	Sean los subconjuntos $A, A_1, A_2 \subseteq G$, se tiene que:
	\begin{enumerate}
		\item $A_1 \subseteq A_2 \Rightarrow A^{'}_2 \subseteq A^{'}_1$
		\item $A \subseteq A''$
		\item $A = A''''$
	\end{enumerate}
\end{proposicion}

Un conjunto $A \subseteq M$ se denomina \textit{conjunto cerrado} para el operador $''$ si es un punto fijo para $''$, es decir, $''(A)=A$. Los conjuntos cerrados\index{conjuntos cerrados} permiten definir lo que se denominan \textit{conceptos formales}\index{concepto formal}, los cuales son súmamente importantes en FCA y a los que se dedica el siguiente apartado. 


\subsection{Conceptos Formales}
\label{subsec:conceptosFormales}
De forma general, un concepto formal permite describir formalmente un hecho del contexto y caracterizar un conjunto de objetos por medio de los atributos que comparten y viceversa. 

Operacionalmente, un par $(X,Y)$ es un concepto si se verifica que:
\begin{itemize}
	\item Cada objeto en $X$ tiene todos los atributos de $Y$.
	\item Para cada objeto en $G$ que no está en $X$, existe un atributo en $Y$ que el objeto no tiene.
	\item Para cada atributo en $M$ que no está en $Y$, hay un objeto en $X$ que no tiene ese atributo.
\end{itemize}

La definición formal:

\begin{definicion}[Concepto formal]
	Sea $K = (G,M,I)$ un contexto formal y $A \subseteq G$, $B \subseteq M$. El par (A, B) se denomina concepto formal si $A'=B$ y $B'=A$. El conjunto de objetos $A$ se denomina extensión del concepto (A, B) mientras que el conjunto de atributos $B$ será la intensión del concepto.
\end{definicion}

La descripción de un concepto a través de su extensión e intención es redundante, ya que cada una de las dos partes determina la otra debido a que $B\ =\ A'$ y $A\ =\ B'$, sin embargo, pueden existir ocasiones en las cuales esta descripción redundante puede ser conveniente \cite{Ganter2002}.

Una alternativa gráfica de definir los conceptos formales es la siguiente. Desde la representación del contexto formal, un concepto formal se puede reconocer por medio de una submatriz de tal manera que todas las celdas de la submatriz son verdaderas (no es necesario que la submatriz esté formada por celdas contiguas). De esta forma, en la Tabla \ref{tabla:extractoEjemploContextoFormal}, se ve como es posible extraer un concepto formal como el par (\textit{\{Air New Zealand, All Nippon Airways\},\{Europa, Asia, Estados Unidos\}}) a partir del contexto formal. 

%\begin{table*}[tb]
%\caption{Conceptos formales a partir de la representación del contexto formal.}
%\label{table:conceptosFormales} 
%\centering
%{\scriptsize
%\begin{tabular}{lcccccc}
%\hline
%Modelo de coche & Consumo & Cilindrada & Movilidad & Potencia & Peso & Aceleración\\
%\hline
%Chevrolet Vega &  &  &  & \checkmark &  & \checkmark\\
%Toyota Corolla &  &  &  & \checkmark &  & \\
%Ford Pinto &  &  & \checkmark &  & \checkmark & \\
%Volkswagen Beetle & \checkmark &  & \checkmark & \checkmark & \checkmark & \checkmark \\
%Plymouth Satellite  & \cellcolor{gray!25}\checkmark & \cellcolor{gray!25}\checkmark & \cellcolor{gray!25}\checkmark &  &  & \cellcolor{gray!25}\checkmark \\
%Chevrolet Malibu & \cellcolor{gray!25}\checkmark & \cellcolor{gray!25}\checkmark & \cellcolor{gray!25}\checkmark &  &  & \cellcolor{gray!25}\checkmark \\
%\hline
%\end{tabular}
%}
%\end{table*}

\begin{table*}[tb]
\caption{Extracto del ejemplo de contexto formal sobre los destinos aéreos del grupo Star Alliance \ref{tabla:ejemploContextoFormal}}
\label{tabla:extractoEjemploContextoFormal} 
\centering
{\scriptsize
\begin{tabular}{lccccccccc}
\hline
 & \rotatebox{90}{Latinoamérica} & \rotatebox{90}{Europa} & \rotatebox{90}{Canadá} & \rotatebox{90}{Asia} & \rotatebox{90}{Oriente Medio} & \rotatebox{90}{África} & \rotatebox{90}{México} & \rotatebox{90}{Caribe} & \rotatebox{90}{Estados Unidos\ }\\
\hline
$\left [ \ldots \right ]$ &  &  &  &  &  &  &  &  & \\
\cellcolor{gray!25}Air New Zealand &  & \cellcolor{gray!25}\checkmark &   & \cellcolor{gray!25}\checkmark  & & & & & \cellcolor{gray!25}\checkmark \\
\cellcolor{gray!25}All Nippon Airways &  & \cellcolor{gray!25}\checkmark &   & \cellcolor{gray!25}\checkmark  & & & & & \cellcolor{gray!25}\checkmark \\
$\left [ \ldots \right ]$  &  &  &  &  &  &  &  &  & \\
\hline
\end{tabular}
}
\end{table*}


\subsection{Retículo de conceptos}
\label{subsec:reticuloConceptos}
Un contexto formal puede tener muchos conceptos formales. El conjunto de todos los conceptos formales de un contexto formal $K$ constituye el denominado \textit{retículo de conceptos} con la relación de inclusión que se muestra a continuación.

Si $(X_1,Y_1)$ y $(X_2,Y_2)$ son conceptos, se define un orden parcial, $\leq$, de forma que $(X_1,Y_1) \leq (X_2,Y_2)$ si y sólo si $X_1 \subseteq X_2$, o equivalentemente, si $Y_2 \subseteq Y_1$.

Los pares de conceptos en este orden parcial tienen una única máxima cota inferior, que es el concepto generado por $X_1 \cap X_2$. De forma análoga, poseen una única mínima cota superior, el concepto generado por los atributos $Y_1 \cap Y_2$. Por medio de estas operaciones de cálculo del máximo y del mínimo de dos conceptos, se satisfacen las propiedades que definen un retículo. 

La Figura \ref{figura:ejemploReticuloAerolineas} muestra el retículo de conceptos\index{retículo de concepto} asociado al contexto formal mostrado anteriormente \ref{ejemploContextoFormal}.

\begin{figure}[htbp]
		\begin{center}
			\includegraphics[height=.6\textheight,width=1\textwidth]{ejemploReticuloAerolineas.png}
		\end{center}
		\caption{Retículo de conceptos\index{retículo de conceptos} asociado al contexto formal \ref{ejemploContextoFormal}}
		\label{figura:ejemploReticuloAerolineas}
\end{figure}

En un diagrama de líneas como el de la Figura \ref{figura:ejemploReticuloAerolineas}, cada nodo representa un concepto formal. Un concepto $c_1$ es un subconcepto de un concepto $c_2$ si y solo si hay un camino de  descendente desde el nodo que representa $c_2$ al nodo que representa $c_1$. El nombre de un objeto $g$ se asocia al nodo que representa el concepto más pequeño que contiene $g$ en su extensión; dualmente, el nombre de un atributo $m$ va asociado al nodo que representa el concepto más grande con $m$ en su intensión. 

Se pueden comprobar fácilmente las relaciones que existen en el contexto ya que un objeto $g$ tiene un atributo $m$ si y solo si el concepto asociado a $g$ es un \textit{subconcepto} del asociado a $m$. La extensión de un concepto consiste en todos aquellos objetos cuyas etiquetas están asociadas a subconceptos, y, dualmente, la intensión consiste en todos los atributos asociados a \textit{superconceptos}. 

Por ejemplo, el concepto etiquetado como `Medio Oriente' tiene como extensión el conjunto \{\textit{Singapore Airlines, The Austrian Airlines Group, Lufthansa, Air Canada}\}, y como intensión \{\textit{Middle East, Canadá, Estados Unidos, Europa, Asia}\}.

En la parte superior del retículo, encontramos los destinos que ofrecen la mayoría de las aerolíneas: Europa, Asia Pacífico y los Estados Unidos. Por ejemplo, exceptuando British Midland y Ansett Australia, todas las aerolíneas ofrecen vuelos a Estados Unidos. Esas dos líneas aéreas se encuentran en la parte superior del diagrama, ya que tienen la menor oferta de vuelos, operan sólo en Europa y Asia, respectivamente. 

De esta forma, cuanto más se avance en el retículo de conceptos, más destinos ofrecerán las aerolíneas. Así, la mayor oferta de destinos se encuentra en las aerolíneas de la parte inferior del retículo: Lufthansa y Air Canada. De forma análoga, cuanto más se descienda en el retículo, serán menos los destinos ofertados, e.g. África, Medio Oriente y el Caribe.



\subsection{Sistema de implicaciones}
\label{subsec:sistemaImplicaciones}
Un concepto equivalente al retículo de conceptos es el denominado sistema de implicaciones \cite{Ganter1997}. Como ya se adelantó en el Capítulo \ref{cap:introduccion}, las implicaciones constituyen el eje fundamental de trabajo en esta tesis doctoral. Reflejan una forma relativamente sencilla de trasladar las relaciones lógicas que se encuentran entre los atributos que poseen los objetos de los datasets\index{dataset} ya que combinan una forma muy simple y natural de escribir reglas del tipo \textit{si-entonces}\index{if-then rules} con una gestión muy eficiente y automatizada de la información.

%Básicamente, una implicación puedeEste concepto de implicación es el que guía este trabajo otorgando un gran potencial para automatizar técnicas de razonamiento, con el beneficio que eso conlleva. Además, las implicaciones son elemento fundamental para el desarrollo de formas más eficientes de representación del conocimiento que el retículo de conceptos.

Para introducir el trabajo realizado utilizando la lógica sobre los conjuntos de implicaciones, se va a proceder describiendo los componentes habituales de una lógica: su lenguaje, sintaxis, semántica y método de razonamiento. No obstante, como se ha comentado anteriormente, los conjuntos de implicaciones se han utilizado para diferentes campos de conocimiento (FCA, bases de datos y sistemas de recomendación). En consecuencia, en este punto se presentan los elementos de la lógica que serán comunes a todos ellos, en concreto, el lenguaje y la sintaxis. El resto, i.e. la semántica y el método de razonamiento, se presentará para cada una de las secciones correspondientes \ref{sec:basesDatosRelacionales} y \ref{sec:logicaSimplificacion}.

\subsection*{Lenguaje}
\noindent
\begin{definicion}
	Dado un conjunto $M$ finito de símbolos (denominados atributos) no vacío, el lenguaje sobre $M$ se define como: 
$$
\mathcal L_M = \{A\to B\mid A,B\subseteq M\}
$$
\end{definicion}

Las fórmulas $A \to B$ se denominan \emph{implicaciones} y los conjuntos $A$ y $B$ reciben el nombre de \emph{premisa} y \emph{conclusión} de la implicación respectivamente. Los conjuntos $\sum \subseteq \mathcal L_M$ se denominan \emph{sistemas de implicaciones} sobre $M$.

\subsection*{Sintaxis}
\noindent
Para simplificar la notación:
\begin{itemize}
	\item Se utilizarán letras minúsculas para denotar los elementos en $M$, mientras que las mayúsculas denotan sus subconjuntos.
	\item Se omiten las llaves en premisas y conclusiones, es decir, $abcde$ denota el conjunto $\{a,b,c,d,e\}$.
	\item Se escriben sus elementos por yuxtaposición, es decir, para $X \cup Y$ se escribirá $XY$.
	\item Para la diferencia, se cambia $X-Y$ por $X \smallsetminus Y$.
\end{itemize}

\begin{definicion}[Implicación]\index{Implicación}
	Una implicación sobre un conjunto de atributos $M$ es una expresión de la forma $X \to Y$, donde $X$ e $Y$ son conjuntos de atributos, i.e. $X \subseteq M$ y $Y \subseteq M$.
\end{definicion}

Se dice que una implicación $X \to Y$ se cumple en un contexto formal $K$ si y sólo si cada objeto $A \in G$ que tiene todos los atributos de $X$ también tiene todos los atributos de $Y$.

\begin{definicion}[Implicación trivial]\index{Implicación!trivial}
	Una implicación $X \to Y$ es trivial si $Y \subseteq X$.
\end{definicion}

\begin{definicion}[Implicación unitaria]\index{Implicación!unitaria}
	Sea $X$ un conjunto de atributos y $a$ un atributo del conjunto, $a \in X$, una implicación se dice unitaria si su conclusión es un conjunto unitario, i.e. $X \to a$.
\end{definicion}

\begin{ejemplo}
	Sea $M = \{a,b,c,d\}$ un conjunto de atributos. Se cumple que $\{a\to b, a\to c\} \equiv \{a\to bc\}$ porque para cada contexto formal $K = (G,M,I)$, se verifica que $\{b,c\}' = \{b\}' \cup \{c\}'$. Por tanto, $\{a\}' \subseteq \{b\}'$ y $\{a\}' \subseteq \{c\}'$ si y sólo si $\{a\}' \subseteq \{b,c\}'$. Este ejemplo permite asegurar que cualquier sistema de implicaciones es equivalente a un sistema de implicaciones unitarias.
\end{ejemplo}

\begin{proposicion}
	Sea $M$ un conjunto de atributos y $\Sigma \subseteq \mathcal L_M$. Se verifica que:
	\[
		\Sigma \equiv \bigcup_{A\to B \in \Sigma} \{A \to b \mid b \in B\}
	\]
\end{proposicion}

Un ejemplo básico de implicaciones puede verse utilizando nuevamente la información de la Tabla \ref{tabla:ejemploContextoFormal}. En ese ejemplo puede apreciarse una relación que siempre se cumple y es la siguiente. Si la aerolínea provee servicio de vuelo a \textit{Latinoamérica} entonces también ofrece como destino \textit{Estados Unidos}. He ahí un claro ejemplo de regla \textit{si-entonces} o implicación (en este caso, unitaria), que se verifica en el contexto.

Por completitud, el conjunto de todas las implicaciones que se verifican en ese contexto es: 

\noindent
$\Sigma\ =\ \{$ 

$Europa,\ Estados\  Unidos \rightarrow Asia$;

 $Asia,\  Estados\  Unidos \rightarrow Europa$; 
 
 $Latinoamerica \rightarrow Estados\  Unidos$; 
 
 $Canada \rightarrow Estados\  Unidos$; 
 
 $Europa,\  Asia \rightarrow Estados\  Unidos$;  
 
 $Africa \rightarrow Europa,\  Asia,\  Estados\  Unidos$; 
 
 $Mexico \rightarrow Latinoamerica,\  Estados\  Unidos$; 
 
 $Caribe \rightarrow Latinoamerica,\  Estados\  Unidos$; 
 
 $Latinoamerica,\  Canada,\  Estados\  Unidos \rightarrow Mexico$; 
 
 $Europa,\  Canada,\  Asia,\  Africa,\  Estados\  Unidos \rightarrow Oriente\  Medio$; 
 
 $Oriente\  Medio \rightarrow Europa,\  Canada,\  Asia,\  Estados\  Unidos$;
 
 $Latinoamerica,\  Mexico,\  Caribe,\  Estados\  Unidos \rightarrow Canada$
 
\noindent
 $\}$.

Se puede considerar a las implicaciones y el retículo de conceptos como distintas alternativas de tratar la información que se puede extraer de un contexto formal. No obstante, los retículos de conceptos permiten una representación gráfica, mientras que la característica fundamental, desde el punto de vista de esta tesis doctoral, es que los sistemas de implicaciones facilitan el razonamiento por medio de la lógica.




\section{Bases de Datos Relacionales}\index{Bases de Datos Relacionales}
\label{sec:basesDatosRelacionales}
El modelo de base de datos relacional aparece en el exitoso artículo de Edgar Frank Codd en 1970 \cite{Codd1970}. Codd propuso que los sistemas de bases de datos deberían presentarse al usuario con una vista de datos organizada en forma de tablas bidimensionales (filas y columnas) que denominó \textit{relaciones}.

La Tabla \ref{tabla:ejemploPeliculas} es un ejemplo de relación en el que cada fila representa una película y cada columna una propiedad de la película. De forma general, en un esquema relacional se pueden encontrar los siguientes elementos.

\begin{definicion}[Atributo]
	Un atributo $A$ es un identificador para un elemento en un dominio $D$. En en modelo relacional aparecen en las columnas de la tabla.
\end{definicion}

Los atributos en un esquema de relación son un conjunto, no una lista.

\begin{definicion}[Esquemas]\index{Esquemas}
	El nombre de una relación junto con su conjunto de atributos se denomina esquema para esa relación. Habitualmente, un esquema se denota por un identificador seguido de los atributos entre paréntesis, en el ejemplo, el esquema podría ser: Películas(Título, Año, País, Director, Nacionalidad, Actor).
\end{definicion}

\begin{definicion}[Tuplas]\index{Tuplas}
	Cada una de las filas de una relación, exceptuando la fila de encabezado que contiene los nombres de los atributos, se denomina tupla. Una tupla contiene un valor para cada atributo de la relación, por ejemplo: \{\textit{Pulp Fiction, 1994, USA, Quentin Tarantino, USA, Uma Thurman}\}.
\end{definicion}

El modelo relacional requiere que cada componente de cada tupla sea atómico. No se permite que un valor de la tupla sea una estructura de datos (e.g. una lista, una matriz, un conjunto, etc.) cuyos valores puedan dividirse en componentes más pequeños. De esta forma, se puede incluir el dominio para cada atributo del esquema, utilizando habitualmente, la siguiente nomenclatura: \{\textit{Titulo:Pulp Fiction, Año:1994, Pais:USA, Director:Quentin Tarantino, Nacionalidad:USA, Actor (o actriz):Uma Thurman}\}.

Las relaciones son conjuntos de tuplas, no listas de tuplas y por tanto, el orden en que el se presenten las tuplas de una relación es irrelevante. De hecho, se puede incluso modificar el orden de aparición de los atributos y la relación se mantiene constante.

El diseño de una base de datos relacional no es trivial \cite{Harrington2016}. La planificación de la estructura de la base de datos, en particular de las tablas, es vital para la gestión efectiva de la misma. El diseño de la estructura de una tabla consiste en una descripción de cada uno de los campos que componen el registro y los valores o datos que contendrá cada uno de esos campos.

En el modelo relacional, una base de datos consiste en una o más relaciones \cite{Elmasri2010}. El conjunto de los esquemas para las relaciones de una base de datos se denomina \textit{esquema de base de datos relacional}. Un diseño impreciso de un esquema de base de datos relacional puede generar ciertas anomalías que provoquen el mal funcionamiento del sistema. Una anomalía es una inconsistencia entre una parte de los datos y otra. Los principales tipos de anomalías aparecen a la hora de operar con el sistema en términos de actualizaciones, eliminaciones o inserción de información redundante \cite{Vavilis2015,Costante2017}.



\subsection{Dependencias Funcionales}
\label{subsec:dependenciasFuncionales}
Existen muchas restricciones que el modelo relacional permite establecer en las relaciones de los esquemas de la base de datos y mediante su análisis se puede examinar cuidadosamente el diseño de un esquema relacional. Concretamente, esta parte de la tesis está enfocada en las restricciones denominadas dependencias funcionales.

\begin{definicion}[Dependencia Funcional]\index{dependencias funcionales}
	Sea M un conjunto de atributos. Una dependencia funcional (FD) sobre M es una expresión de la forma $X \rightarrow Y$, donde $X,\ Y$ son conjuntos de atributos. Una FD
se satisface en una tabla R si para cada dos tuplas de R, si verifican X, entonces verifican Y.
\end{definicion}

\begin{definicion}[Dependencia Funcional Trivial]
	Una dependencia funcional es trivial si $X \subseteq Y$.
\end{definicion}

\begin{definicion}[Dependencia Funcional Unitaria]
	Una dependencia funcional es unitaria cuando su conclusión es un conjunto unitario, es decir, $X \rightarrow a \ \mid \ a \in M$.
\end{definicion}

\begin{definicion}[Esquema Relacional]
	Un esquema de relación \df es un par ordenado que consiste en un conjunto de atributos $M$ y un conjunto $F$ de FD sobre $M$.
\end{definicion}

Intuitivamente, una FD $X \rightarrow Y$ indica que el conjunto de atributos $X$ determina el conjunto de atributos $Y$, lo cual se acerca al concepto de regla \textit{si-entonces} que definen las implicaciones. Entonces, ¿por qué el cambio de nomenclatura? 

La diferencia entre implicación y FD radica en el sentido de que la segunda es más restrictiva que la primera. En la Sección \ref{subsec:sistemaImplicaciones} se definió el concepto de implicación, denotado por $X \rightarrow Y$, y se dijo que una implicación se verifica en un contexto formal $K$ si cada objeto del contexto que contenga los atributos de $X$ también tiene los de $Y$, sin embargo, en una FD, no sólo esos atributos tienen que aparecer en ambos conjuntos sino que además su \textit{valor} ha de ser el mismo.

Esta es una diferencia esencial que surge del hecho de que en contextos formales se trata con una relación binaria $I$ entre los objetos y los atributos del contexto, mientras que en esquemas relacionales, los atributos pueden ser valores \textit{multivaluados} y por tanto, para que una FD se verifique, los valores han de coincidir para todos aquellos objetos cuya premisa y conclusión coincidan.

Para ilustrar de una forma más sencilla esta diferencia se puede contrastar la información que refleja el contexto formal del ejemplo \ref{tabla:ejemploContextoFormal} con la Tabla \ref{tabla:ejemploPeliculas}. En el primero se ve como los valores de la relación pueden considerarse binarios en el sentido de que indican si una aerolínea ofrece vuelo a un destino o no. Sin embargo, en el segundo, la tabla refleja diferentes valores para cada uno de los atributos del esquema (nombres propios, años, etc.). 

De esta manera, una implicación que verifica en ese contexto formal es $Canada \rightarrow Estados\ Unidos$, mientras que una FD que se verifica en el esquema relacional puede ser $Director \rightarrow Nacionalidad$. Sin embargo, nótese que por contra, la FD $Director \rightarrow Titulo$ no es válida pues existe más de una tupla de la relación cuyos valores para esos atributos no coinciden, Quentin Tarantino dirige tanto \textit{Pulp Fiction} como \textit{Django Unchained}.

Obviamente, el concepto de implicaciones en FCA puede ampliarse para poder tratar este tipo de situaciones multivaluadas otorgando valores, por ejemplo, dentro de un rango [0,1], pero en ese caso, se entraría en lo que se denomina implicaciones difusas  \cite{Baczynski2008} que es otro campo de conocimiento que queda fuera del ámbito de esta tesis doctoral.

Como consecuencia de lo anterior, el concepto de FD es de gran importancia en la tesis debido a que es la base para el trabajo realizado sobre el problema de la enumeración de las claves de esquemas relacionales ya va a permitir caracterizar las claves para una determinada relación.

Una clave en bases de datos relacionales está constituida por un subconjunto de los atributos de una tabla tal que los valores de esos atributos identifican unívocamente a cada tupla de la tabla. Se puede definir por medio de FD de la siguiente forma:

\begin{definicion}[Clave]\index{clave}
	Dada una tabla $R$ sobre el conjunto de atributos $M$, se dice que $K$ es una clave de $R$ si la FD $K \rightarrow M$ se verifica en $R$.
\end{definicion}

\begin{definicion}[Clave Minimal]\index{clave!claves minimales}
	Dada una tabla $R$, el conjunto de atributos $K \subset M$ se dice que es una clave minimal si $K$ es clave y para todo atributo $k \in K$ el subconjunto $K - \{k\}$ no es clave de $R$.
\end{definicion}

\begin{definicion}[Superclave]
	El conjunto de atributos $K \subseteq M$ se dice que es una superclave de $R$ si $K^+\ =\ M$.
\end{definicion}

Finalmente, a través de las FD que se verifican en un determinado esquema relacional y por medio de la lógica que se introduce a continuación, se ha realizado un amplio estudio de los métodos de enumeración de claves basados en el paradigma de Tableaux\index{Tableaux} \cite{Morgan1992,Risch1992} y el diseño de nuevos métodos que mejoran a los existentes en la literatura. El trabajo ha conllevado además una exhaustiva labor en cuanto a experimentos y pruebas para verificar las mejoras alcanzadas. Debido a los requerimientos que alcanza el problema de la enumeración de claves cuando la información de entrada es considerable, la mayor parte de estos experimentos ha supuesto utilizar el paralelismo\index{paralelismo} en las implementaciones y recursos de supercomputación\index{supercomputación} como se puede comprobar en trabajos publicaciones que avalan este trabajo de investigación \cite{Benito-Picazo2014,Benito-Picazo2016}.   


\section{Lógica de Simplificación}
\label{sec:logicaSimplificacion}

\subsection{Axiomas de Armstrong}
\label{subsec:axiomasArmstrong}
Los conocidos Axiomas de Armstrong\index{Axiomas de Armstrong} es el primer sistema descrito para tratar sistemas de implicaciones utilizando la lógica \cite{Armstrong74}. Este sistema ha tenido una clara influencia en el diseño de varias lógicas sobre implicaciones, todos ellas construidas alrededor del paradigma de la transitividad. Con el paso de los años, otros trabajos han propuesto sistemas axiomáticos equivalentes \cite{Ibaraki1999,Atzeni1993,Paredaens89}.

Los Axiomas de Armstrong son válidos al generar sólo implicaciones dentro del cierre del conjunto de implicaciones\index{conjuntos de implicaciones} (denotado como $F^+$) cuando se actúa sobre el conjunto $F$. También son completos ya que la aplicación repetitiva de las reglas generarán todas las implicaciones en el conjunto cerrado $F^+$. 

Este sistema axiomático\index{sistema axiomático} está formado por un axioma, denominado \textit{Reflexivo}, y dos reglas de inferencia, \textit{Aumentativa} y \textit{Transitiva} que se definen a continuación

Sean $A$, $B$, $C$ subconjuntos de atributos de $M$. Entonces, se tiene:

\begin{center}
	{\scriptsize \tt{[Ref]}}\ $\displaystyle\frac{}{AB \to A}$ \quad
	{\scriptsize \tt{[Aug]}}\ $\displaystyle\frac{A \to B\cup C}{AC \to BC}$ \quad
	{\scriptsize \tt{[Tran]}}\ $\displaystyle\frac{A \to B,\ B \to C}{A \to C}$ 
\end{center}

Además de su forma natural de expresar el conocimiento como regla, las implicaciones proporcionan un sistema de razonamiento lógico y de inferencia. Su tratamiento simbólico se ha mostrado en esta sección, sin embargo, debido al rol central que desempeña la transitividad en ese sistema axiomático, el desarrollo de métodos ejecutables para resolver problemas de implicaciones se basa en métodos indirectos.

Por ello, si bien es cierto que el sistema de Armstrong es un trabajo que acumula innumerables citas en diferentes trabajos a lo largo de los años, su utilidad práctica se ve mermada debido a la dificultad que conlleva a la hora de plasmar las demostraciones. Es por ello que su uso está enfocado al estudio teórico de las implicaciones en vez de al desarrollo de nuevos algoritmos. No obstante, como se ha mencionado, es un buen punto de partida para el desarrollo de nuevas lógicas para el tratamiento de las implicaciones, en concreto, para la lógica \slfd.

La lógica \slfde evita el uso de la transitividad y se guía por la idea de simplificar el conjunto de implicaciones mediante la eliminación atributos redundantes de manera eficiente  \cite{Mora2012}. Por consiguiente, la introducción de la lógica \slfde abrió la puerta al desarrollo de métodos de razonamiento automatizados directamente basados en su novedoso sistema axiomático \cite{CorderoEMG14, CorderoEMOR15} que se resume a continuación.



\subsection{Lógica \slfd}
\label{subsec:logicaSLFD}
Se introduce ahora la lógica \slfde\index{\slfde} \cite{Enciso2002}. Para ello, habría que hacer una descripción de sus cuatro pilares fundamentales: su lenguaje, sintaxis, semántica y método de razonamiento automático. Sin embargo, hay que recordar que el lenguaje y la sintaxis se describió previamente en \ref{subsec:sistemaImplicaciones} y por tanto, en este momento se describe su semántica y método de razonamiento. 

\subsection*{Semántica}
\noindent
Para introducir la semántica utilizada, se va a utilizar el concepto de \textit{operador de cierre}\index{operador de cierre} que se reescribe a continuación.

Un operador de cierre en $M$ es una función $c\colon 2^M \to 2^M$ que es \emph{extensivo} ($X\subseteq c(X) \ \forall X\subseteq M$), \emph{monótono} ($X_1\subseteq X_2$ implica que $c(X_1)\subseteq c(X_2)\ \forall X_1,X_2\subseteq M$), e \emph{idempotente} ($c(c(X))=c(X) \quad \forall X\subseteq M$). Los puntos fijos para $c$ (i.e. $X\subseteq M$ tales que $c(X)=X$) se denominan \emph{conjuntos cerrados}.

Un operador de cierre $c$ en $M$ recibe el nombre de \emph{modelo} para una implicación $A\to B\in\mathcal L_M$ si $B\subseteq  c(A)$; se denota $c\models A\to B$. Además, dado un sistema de implicaciones $\Sigma\subseteq \mathcal L_M$ y un operador de cierre $c$ en $M$, $c\models \Sigma$ denota que $c\models A\to B$ para todo $A\to B\in \Sigma$.

Se dice que $A\to B$ se \emph{deriva semánticamente} de $\Sigma$, denotado $\Sigma\models A\to B$, si cualquier modelo para $\Sigma$ también es un modelo para $A\to B$, i.e. $c\models \Sigma$ implica que $c\models A\to B$ para todo operador de cierre $c$ en $M$. 


\subsection*{Sistema Axiomático}
\noindent
\slfde\index{\slfde} constituye una lógica válida y completa \cite{Enciso2002} en la que el principal elemento del lenguaje son las implicaciones. Se define formalmente como:
\begin{definicion}
	Sea $M$ un conjunto finito, la formulación de \slfde son expresiones, denominadas implicaciones, de la forma $ X \to Y$, donde $X$ e $Y$ son subconjuntos de $M$.
\end{definicion}

Las implicaciones se interpretan de forma conjuntiva, es decir, corresponden a las fórmulas $a_1\land \ldots\land a_n \to b_1\land \ldots\land b_m$ donde las proposiciones $a_1, \ldots  a_n,  b_1, \ldots, b_m$ son elementos del conjunto $M$. La interpretación es la siguiente:

\begin{definicion}
Sea $O$ y $M$ dos conjuntos finitos, que representan objetos y atributos respectivamente, y $I$ una relación en $O\times M$. Una implicación de \slfd, $X\to Y$, donde $X$ y $Y$ son subconjuntos de $M$, es válida en $I$ si y sólo si
$$\{o\in O\mid (o,x_i)\in I\, \ \forall x_i\in X\}\subseteq \{o\in O\mid (o,y_j)\in I\, \ \forall j_i\in Y\}$$
\end{definicion}

\slfde se define como el par ($L_{FD}, S_{FD}$) donde $S_{FD}$ tiene el siguiente esquema axiomático:

\begin{center}
{\scriptsize \tt{[Ref]}}\quad $\displaystyle\frac{}{A\cup B \to A}$  
\end{center}

\noindent
junto con las siguientes reglas de inferencia\index{reglas de inferencia}, denominadas \emph{fragmentación}\index{reglas de inferencia!fragmentación}, \emph{composición}\index{reglas de inferencia!composición} y \emph{simplificación}\index{reglas de inferencia!simplificación} respectivamente.

%\begin{center}
%{\scriptsize \tt{[Frag]}}\ {\footnotesize $\displaystyle\frac{A\to B\cup C}{A\to B}$}  \quad
%{\scriptsize \tt{[Comp]}}\  {\footnotesize $\displaystyle\frac{A\to B,\ C \to D}{A\cup C \to B\cup D}$ } \quad
%{\scriptsize \tt{[Simp]}}\  {\footnotesize $\displaystyle\frac{A\to B,\ C \to D}{A\cup(C\smallsetminus B)\to D}$}
%\end{center}

\begin{center}
	{\scriptsize \tt{[Frag]}}\ $\displaystyle\frac{A\to B\cup C}{A\to B}$  \quad
	{\scriptsize \tt{[Comp]}}\ $\displaystyle\frac{A\to B,\ C \to D}{A\cup C \to B\cup D}$ \quad
	{\scriptsize \tt{[Simp]}}\ $\displaystyle\frac{A\to B,\ C \to D}{A\cup(C\smallsetminus B)\to D}$
\end{center}

Se destaca que el lenguaje \slfde considera como fórmulas válidas aquellas en donde cualquiera de sus dos partes puede ser el conjunto vacío, denotado $A \to \varnothing$ y $\varnothing \to A$. Sus significados fueron discutidos en \cite{Enciso2002}. En ese trabajo, también se presenta el siguiente resultado donde la derivación de una implicación $A \to B$ se reduce a la derivación de la fórmula $\varnothing \to B$ teniendo $\varnothing \to A$. Este resultado se usará más adelante en el diseño de nuestro novedoso método de cierre.

\begin{proposicion}
Para cualquier $\varGamma$ y $\forall X, Y\subseteq M$, $\varGamma \vdash X\to Y \text{ si y sólo si }\varGamma \cup \{\top \to X\} \vdash\top \to Y$
\end{proposicion}


\begin{definicion}
Se dice que una implicación $A\to B$ se deriva sintácticamente de un sistema de implicaciones $\Sigma$, y se denota por $\Sigma\vdash A\to B$, si existe una secuencia de implicaciones $\sigma_1,\dots,\sigma_n \in \mathcal L_M$ tal que $\sigma_n=(A\to B)$ y, para todo $1\leq i\leq n$, la implicación $\sigma_i$ satisface una de las siguientes condiciones:
	\begin{itemize}
		\item $\sigma_i$ es un axioma, es decir, verifica el esquema {\tt [Ref]}.
		\item $\sigma_i\in \Sigma$.
		\item $\sigma_i$ se obtiene a partir de implicaciones pertenecientes a $\{\sigma_j\mid 1\le j<i\}$ aplicando las reglas de inferencia {\tt [Frag]}, {\tt [Comp]} o {\tt [Simp]}.
	\end{itemize}
\end{definicion}

La secuencia $\sigma_1,\dots,\sigma_n$ constituye una \emph{demostración} para $\Sigma\vdash A\to B$.

La derivación sintáctica\index{derivación sintáctica} proporciona una gestión automatizada de las implicaciones. En particular, se puede usar para resolver el denominado problema de las implicaciones: dado un conjunto de implicaciones $\Gamma$ y una implicación $A\to B$, queremos responder si $A\to B$ se deduce de $\Gamma$. Este problema se puede abordar utilizando el operador de cierre.

El sistema axiomático es válido y completo, es decir, se cumple que la derivación sintáctica y semántica\index{derivación semántica} coinciden. Esto significa que cada regla que se puede deducir con este sistema puede derivarse semánticamente (el sistema axiomático es válido) y viceversa (el sistema axiomático es completo).

\begin{theorem}
Sea $M$ un conjunto finito no vacío de atributos, $\Sigma \subseteq \mathcal L_M$ y $A\to B \in \mathcal L_M$. Entonces, $\Sigma\models A\to B$ si y sólo si $\Sigma\vdash A\to B$.  
\end{theorem}

La derivación sintáctica conduce a un nuevo operador de cierre denominado \textit{cierre sintáctico}.

\begin{definicion}
	Dado un conjunto de implicaciones $\Sigma \subseteq \mathcal L_M$, un conjunto $X \subseteq M$ se dice cerrado respecto de $\Sigma$ si $A \subseteq X$ implica $B \subseteq X$ para toda $A\to B\in \Sigma$. Debido a que $M$ es cerrado con respecto a $\Sigma$ y cualquier intersección de conjuntos cerrados es cerrada, podemos definir el siguiente operador de cierre:
$$
(\ )^+_\Sigma\colon 2^M\to 2^M\quad X^+_\Sigma=\bigcap\{Y\subseteq M\mid Y\text{ es cerrado w.r.t }\Sigma\text{ y }X\subseteq Y \}
$$
\end{definicion}

El siguiente teorema es esencial para calcular cierres y a su vez también para introducir un método de razonamiento automático.
 
\begin{theorem}[Teorema de deducción]\index{Teorema de deducción}
\label{empty_set}
	Sea $A\to B\in\mathcal L_M$ y $\Sigma\subseteq \mathcal L_M$. Entonces, 
%\vspace*{-0.2cm}
	$$\Sigma \vdash A\to B \quad \mbox{sii} \quad B\subseteq A^+_\Sigma\quad \mbox{sii} \quad 
 	\{\varnothing\to A\} \cup \Sigma \vdash\{\varnothing\to B\}$$
\end{theorem}
 
\begin{corolario}
	Sea $\Sigma\subseteq \mathcal L_M$. $\forall X\subseteq M$, se tiene que 
	$$
	X^+_\Sigma=\max\{Y\subseteq M\mid \Sigma\vdash X\to Y \}.
	$$
\end{corolario}

La principal ventaja de la lógica \slfde radica en que las reglas de inferencia pueden considerarse reglas de equivalencia. Como consecuencia, se ha podido utilizar como núcleo principal para el desarrollo de métodos automáticos para diversas aplicaciones (e.g. obtener claves minimales, cálculos del cierre) como se verá más adelante. Un estudio más detallado al respecto, incluyendo teoremas y demostraciones, puede verse en \cite{Mora2012}.



\section{Método de Razonamiento Automático}
\label{sec:metodoRazonamientoAutomatico}


\subsection{Problema de las implicaciones}
\label{subsec:problemaImplicaciones}
El problema de las implicaciones es crucial en el diseño de un sistema de razonamiento y como tal, existen desde hace años notables estudios al respecto en diferentes áreas, incluyendo las bases de datos relacionales \cite{Armstrong74,Beeri1977,Maier1979}.

Básicamente, el problema de las implicaciones es el siguiente: dado un conjunto finito de implicaciones, determinar mediante la lógica si a partir de ese conjunto se puede inferir una nueva implicación. Dicho de otro modo, si tenemos el conjunto de implicaciones $\Sigma$, el problema consiste en comprobar si se verifica $\Sigma \vdash A \to B$ \cite{Beeri1981,Mitchell1983}.

Claramente, la primera pregunta que surge es si el problema de las implicaciones tiene solución, es decir, si existe algún método que proporcione una respuesta positiva o negativa para cualquier instancia dada del problema. Para ello, un método es a través de axiomas. Un \textit{axioma de inferencia} es una regla que establece que si una relación satisface ciertas dependencias, entonces debe satisfacer otras. Dado un conjunto de implicaciones $\Sigma$ y un conjunto de axiomas de inferencia, el \textit{cierre} de $\Sigma$, denotado por $\Sigma^+$, es el menor conjunto que contiene a $\Sigma$ tal que no es posible aplicar los axiomas de inferencia para derivar una dependencia que no esté en $\Sigma$. En otras palabras, del conjunto $\Sigma$ se deriva una dependencia $\sigma$, denotado $\Sigma \vdash \sigma$, si $\sigma \in \Sigma^+$.



\subsection{Cierre clásico}
\label{subsec:cierreClasico}
El problema de las implicaciones se ha abordado tradicionalmente utilizando un método básico que recibe $A\subseteq M$ como entrada y utiliza de forma exhaustiva la relación de subconjuntos recorriendo iterativamente $\Gamma$ y agregando nuevos elementos al cierre. Este método, fue propuesto en la década de 1970 por Maier \cite{Maier83} y puede considerarse la base principal donde se han sustentado tantos otros. Puede verse en detalle en el Algoritmo \ref{algoritmo:cierreUllman}\index{Cierre clásico}.
\begin{algorithm2e}
%\footnotesize
%\SetAlgoLined
%\SetAlgoFuncName{SchemePruning}
%\dontprintsemicolon
%\KwIn{}
\KwData{$ \varGamma$, $A$}
\KwResult{$A^+_\Gamma$ }
%\KwOut{$X^+$}
    \Indp
    \Begin{
     $A^+_\Gamma:=A$
		
     \Repeat{$A^+_\Gamma=A^\prime$}{
        $A^\prime:=A^+_\Gamma$
				
       \ForEach{ $X \to Y \in  \varGamma$}{
           \If{$X \subseteq A^+_\Gamma$ {\bf and} $Y\not\subseteq A^+_\Gamma$}{
               $A^+_\Gamma:=A^+_\Gamma \cup \{Y\}$
           }%end if
       }% end foreach
		}%until 
   return $A^+_\Gamma$
   }%end begin
 \caption{Cierre clásico}
 \label{algoritmo:cierreUllman}
\end{algorithm2e}

Más tarde, varios autores han desarrollado otros métodos mediante el uso de diferentes técnicas, resolviendo eficientemente este problema en tiempo lineal. En \cite{Paredaens1989}, los autores muestran que la complejidad del problema del cierre es $\mathtt{O}(|{\mathcal{A}}|\, |{ \varGamma}|)$. Además, como se muestra a continuación, en \cite{Mora2012}, los autores presentan un método de cierre de atributos estrechamente relacionado con el sistema axiomático \slfd. También se demuestra que el método tiene un mejor rendimiento que aquellos basados en el cierre clásico.



\subsection{Cierre \slfd}
\label{subsec:cierreSLFD}
Antes de pasar a exponer el algoritmo del cierre \slfd, se muestra el siguiente teorema, el cual es esencial para calcular cierres y a su vez también para introducir un método de razonamiento automático.
 
\begin{theorem}[Teorema de deducción]\index{Teorema de deducción}
\label{empty_set}
	Sea $A\to B\in\mathcal L_M$ y $\Sigma\subseteq \mathcal L_M$. Entonces, 
%\vspace*{-0.2cm}
	$$\Sigma \vdash A\to B \quad \mbox{sii} \quad B\subseteq A^+_\Sigma\quad \mbox{sii} \quad 
 	\{\varnothing\to A\} \cup \Sigma \vdash\{\varnothing\to B\}$$
\end{theorem}
 
\begin{corolario}
	Sea $\Sigma\subseteq \mathcal L_M$. $\forall X\subseteq M$, se tiene que 
	$$
	X^+_\Sigma=\max\{Y\subseteq M\mid \Sigma\vdash X\to Y \}.
	$$
\end{corolario}

El método de razonamiento automático en \slfde se basa en el Teorema de Deducción\index{Teorema de deducción} y un conjunto de equivalencias \cite{Mora2012}. Siguiendo la forma habitual, dos sistemas de implicaciones $\Sigma_1,\Sigma_2\subseteq \mathcal L_M$ se dicen equivalentes si sus modelos coinciden, es decir, se cumple que para todo operador de cierre en $M$, $c\models \Sigma_1$ si y sólo si $c\models \Sigma_2$.

La siguiente proposición proporciona las tres equivalencias, denominadas también: \textit{Fragmentación, Composición y Simplificación}, que se se aplican y justifican el nombre de la lógica \slfde porque, leídas de izquierda a derecha, eliminan la información redundante en el sistema de implicaciones.

\begin{proposicion}\label{simpl_equiv}
	Sean $A,B,C,D\subseteq M$. Se verifican las siguientes equivalencias:
	\begin{enumerate}
		\item {\small$\{A\to B\}\equiv\{A\to B\smallsetminus A\}$}
		\item {\small$\footnotesize\{A\to B, A\to C\}\equiv\{A\to B\cup C\}$}
		\item {\small$A\cap B=\varnothing$ y $A\subseteq C$ implica $\footnotesize\{A\to B, C \to D\}\equiv  \{A\to B, C\smallsetminus B\to D\smallsetminus B\}$}
\end{enumerate}
%
%\begin{equation*}
%\begin{split}
%\{X\to Y,\ U \to V\}& \equiv  \{X\to Y, (U-Y)\to(V-Y)\}\\
%\end{split}
%\end{equation*}
\end{proposicion}

Gracias al Teorema de Deducción y las equivalencias anteriores, se puede pasar de las reglas de inferencia del sistema clásico de Armstrong a un sistema que puede ser automatizable. En este punto aparece el cierre \slfd, denominado {\tt Cls}\index{Cierre \slfd}, y que actúa según el siguiente procedimiento.

Dado un conjunto $A\subseteq M$ y un conjunto de implicaciones $\Sigma$, {\tt Cls} calcula el par $(A^+_\Sigma,\Gamma)$, siendo $A^+_\Sigma$ el cierre sintáctico de $A$ con respecto a $\Sigma$ y $\Gamma$ el conjunto residual de implicaciones respecto a $\varnothing \to A^+_\Sigma$. Esto permite determinar si una implicación $A \to B$ puede deducirse de $\Sigma$.

Los pasos del algoritmo desglosados en lenguaje natural y de forma más detallada son:
\begin{enumerate}
 \item En primer lugar, se incluye la fórmula $\varnothing \to A$ en $\Sigma$ y se usa como semilla por el método de razonamiento mediante las equivalencias mencionadas en la proposición anterior.
 \item A continuación, el algoritmo entra en un proceso iterativo en el cual se irán aplicando las siguientes equivalencias mientras no se alcance la condición de parada.
	\begin{itemize}
		\item {\bf Eq. I}: Si $B\subseteq A$ entonces $\{\emptyset\to A,B\to C\} \equiv \{\emptyset\to A\cup C\}$.
		\item {\bf Eq. II}: Si $C\subseteq A$ entonces $\{\emptyset\to A,B\to C\} \equiv \{\emptyset\to A\}$.
		\item {\bf Eq. III}: En otro caso  $\{\emptyset\to A,B\to C\} \equiv \{\emptyset\to A,B\smallsetminus A\to C\smallsetminus A\}$.
	\end{itemize} 
 \item En el momento en el que no sea posible aplicar ninguna de las equivalencias anteriores, el algoritmo termina dando como resultado el conjunto cierre $A^+_\Sigma$, es decir, el cierre sintáctico de $A$ con respecto a $\Sigma$, y además, el conjunto residual de implicaciones $\Gamma$.
\end{enumerate}

Formalmente, el algoritmo {\tt Cls} puede verse en la Función \ref{algoritmo:Cls}.
\begin{function}[h]
\caption{Cls($A$,$\Sigma$) }\label{algoritmo:Cls}
\small
\DontPrintSemicolon
\SetKwInOut{Input}{input}
\SetKwInOut{Output}{output}
\Input{$A$, conjunto de atributos sobre los que se quiere calcular el cierre; \\
$\Sigma$, un sistema de implicaciones;}
\Output{$A^+_\Sigma$, cierre sintáctico de $A$ con respecto a $\Sigma$; \\ 
$\Gamma$, el sistema de implicaciones residual;}
 
 
%    \Begin{

\Repeat{$\Gamma=\Sigma$}{
$\Gamma:=\Sigma$

$\Sigma:=\varnothing$


\ForEach{$B\to C\in \Gamma$}{
\lIf{$B\subseteq A$}{

\ \ \ \ {$A:=A\cup B$}
}
\lElseIf{$C\not\subseteq A$}{

\ \ \ \ {$\Sigma:=\Sigma\cup\{B\smallsetminus A\to C\smallsetminus A\}$}
}
}
}
 
     \Return $(A,\Gamma)$   
 
%   }%end begin
\end{function}


Aunque es cierto que existen en la literatura numerosas propuestas de algoritmos para calcular el cierre (la mayoría de ellas como modificaciones del cierre clásico de Maier \cite{Maier83}), la principal novedad y ventaja que aporta {\tt Cls} es que, aparte del cálculo del cierre, y de manera simultánea, también se calcula el conjunto reducido de implicaciones, guardando de esta forma el conocimiento complementario que describe la información que no pertenece al cierre. Este hecho conduce sin lugar a dudas a una posición privilegiada, ya que evita el elevado coste de minería de datos para extraer el nuevo conjunto de implicaciones para el conjunto de datos reducido después de cada aplicación del método, algo imprescindible con las implementaciones clásicas. En consecuencia, el proceso supera los costos de minería de datos preservando una complejidad lineal a lo largo del proceso.

Para finalizar este apartado, se muestra un ejemplo básico de aplicación del algoritmo del cierre \slfde propuesto.

\begin{ejemplo}
\label{ejemplo:basico} 
	Sean $\Sigma=\{a\to c, bc\to d, c\to ae, d\to e\}$ y $A=\{c,e\}$. El algoritmo {\tt Cls} devuelve $A^+=\{a,c,e\}$. La siguiente tabla muestra la traza de ejecución paso a paso del algoritmo. 

%{\small
$$\begin{array}{l||lllll}
\hline
Guide &  & \multicolumn{4}{c}{\Sigma } \\
%\hline
\emptyset\to ce &  & a\to c \quad& bc\to d \quad& c\to ae\quad& d\to e \quad\\
\hline
\hline
\emptyset\to ce &   & a\to \!\!\not\! c & b\!\!\not\! c\to d & \!\!\not\! c\to a\!\!\not\! e& d\to \!\!\not\! e \\
\emptyset\to ace &   &  & b\to d & & \\
%\emptyset\to acef &   &  & b\to d &  & \\
\hline
\end{array}
$$
%}%end small

Una vez finalizado la ejecución del algoritmo, se obtiene: ${\tt Cls}(\{c,e\},\{a\to c, bc\to d, c\to ae, d\to e\})=(\{a,c,e\},\{b\to d\})$, donde el cierre es $\{c,e\}^+_\Sigma = \{a,c,e\}$  y el conjunto residual de implicaciones queda como:  $\Gamma = \{b \to d\}$.
\end{ejemplo}



% =====================================================================
% =====================================================================
% =====================================================================