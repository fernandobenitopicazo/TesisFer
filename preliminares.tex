\pagestyle{empty}
\chapter{Preliminares}\label{cap:preliminares}
\pagestyle{headings}

\bigdrop{0pt}{5}{cmr10}A lo largo de este capítulo se van a introducir los principales conceptos, definiciones y resultados sobre los que se sustentan el trabajo de investigación desarrollado. Se parte una vez más de que el objetivo principal de la tesis doctoral es la utilización de los conjuntos de implicaciones para generar soluciones a problemas en el ámbito de FCA, bases de datos y sistemas de recomendación. Se ha diseñado este capítulo con la intención de que el texto sea autocontenido en la medida de lo posible y para ello, se ha dividido en cuatro secciones principales. 

La primera presenta las nociones de FCA que serán necesarias para las soluciones propuestas para generadores minimales y sistemas de recomendación. En la segunda, se recopilan los aspectos fundamentales a tener en cuenta para la enumeración de las claves minimales en esquemas relacionales por medio de dependencias funcionales. La tercera parte se dedica a presentar formalmente la lógica de implicaciones. La cuarta y última, se centra en el razonamiento automático usando dicha lógica.



\section{Análisis Formal de Conceptos}
\label{sec:analisisFormalConceptos}
De forma general, se puede considerar FCA como un marco para el análisis de información que facilita la extracción de conocimiento y la posibilidad de poder razonar sobre él. La referencia principal de este campo de conocimiento viene de la mano de Wille y Ganter en \cite{Ganter1997}. Según el propio Wille en \cite{Wille2005}: \textit{``El objetivo y significado del análisis formal de conceptos como teoría matemática consiste en apoyar la comunicación racional de las personas, mediante el desarrollo de estructuras de conceptos matemáticamente apropiadas que puedan activarse lógicamente''}.

Como principales fortalezas de FCA cabe mencionar: su sólida base matemática y filosófica, una representación gráfica e intuitiva del conocimiento, avalada en más de 2.000 publicaciones científicas y aplicaciones en cientos de proyectos \cite{Wille2005} en diversos campos de conocimiento, como se ha mencionado en el Capítulo \ref{cap:introduccion}. 


\subsection{Contextos formales}
\label{subsec:contextosFormales}
El punto de partida de FCA es un \textit{contexto formal}\index{contexto formal} que se define a continuación.

\begin{definicion}[Contexto formal]
	Un contexto formal es una tripleta $K = (G,M,I)$ que consiste en dos conjuntos no vacíos, $G$ y $M$, y una relación binaria $I$ entre ellos. Los elementos de $G$ se llaman objetos del contexto, y los elementos de $M$ se llaman atributos del contexto. Para $g \in G$ y $m \in M$, escribimos $<g,m> \in I$ o $gIm$ si el objeto $g$ posee el atributo $m$.
\end{definicion}

La forma más sencilla de representar un contexto formal es mediante una tabla donde los objetos se sitúan en sus filas y los atributos en las columnas, de forma que un valor en cada celda indica si un objeto $g \in G$ posee un atributo $m \in M$. Hay que tener en cuenta que la definición de contexto formal es deliberadamente muy general. No hay restricciones sobre la naturaleza de los objetos y atributos. Se pueden considerar objetos físicos, personas, números, procesos, estructuras, etc. En realidad, cualquier cosa que sea un \textit{conjunto} en el sentido matemático se puede tomar como el conjunto de objetos o de atributos de algún contexto formal. También es posible intercambiar el papel de los objetos y atributos, es decir, si se tiene que $K = (G,M,I)$ es un contexto formal, igualmente lo será su dual, $K = (M,G,I')$ con $mIg \Longleftrightarrow gIm$. Además, ni siquiera es necesario que $G$ y $M$ sean disjuntos, de hecho, pueden incluso no ser diferentes. Se utilizarán letras mayúsculas: A, B, C, etc., para denotar subconjuntos de $M$ y $G$.

%\begin{ejemplo}
%	Se considera un ejemplo de contexto formal en el cual los objetos son hoteles, los atributos son diferentes servicios que ofrece el establecimiento y cada celda de la tabla indica si un objeto cumple un atributo. Por tanto, se tiene el contexto formal $\mathbf{K} = (G,M,I)$ en el cual:
%
%	G = \{Fuerte Estepona Suites, Hotel Buenavista, Hotel Paraíso, Apts Marriot Playa, Hotel Piedra Paloma, Hostal Hospedería V Cent\}
%
%	M = \{AC, Bar, Gimnasio, Internet, Masajes, Aparcamiento\}
%
%	La Tabla \ref{table:hotelsExtract} muestra la relación binaria $I$ utilizando información real de varios hoteles de la Costa del Sol.
%
%\begin{table*}[tb]
%\caption{Ejemplo de contexto formal utilizando datos reales del sector hotelero}
%\label{table:hotelsExtract} 
%\centering
%{\scriptsize
%\begin{tabular}{lccccccccc}
%\hline
% & AC & Bar & Gimnasio & Internet & Masajes & Aparcamiento\\
%\hline
%Fuerte Estepona Suites & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark\\
%Hotel Buenavista &  & \checkmark &  &  &  & \checkmark \\
%Hotel Paraíso & \checkmark & \checkmark &  &  &  & \checkmark \\
%Apts Marriot Playa &  &  &  & \checkmark &  &  \\
%Hotel Piedra Paloma &  & \checkmark &  &  &  & \checkmark \\
%Hostal Hospedería V Cent & \checkmark & \checkmark &  & \checkmark &  & \checkmark \\
%\hline
%\end{tabular}
%}
%\end{table*}
%
%	%Por tanto, se puede apreciar como el hotel \textit{Fuerte Estepona Suites} ofrece todos los servicios disponibles en el contexto, mientras que los \textit{Apts Marriot Playa} únicamente ofrecen el servicio de \textit{Internet}.
%\end{ejemplo}

Para ilustrar un ejemplo de contexto formal\index{contexto formal} y como apoyo al contenido que se presenta en esta sección, se va a utilizar el siguiente ejemplo tomado de \cite{Ganter2002}. En él, los autores muestran un información sobre los destinos aéreos que oferta un grupo de aerolíneas comerciales.

\begin{ejemplo}
\label{ejemploContextoFormal}
	Sea $K$ un contexto formal donde el conjunto de objetos $G$ comprende todas las líneas aéreas del grupo Star Alliance y el conjunto de atributos $M$ muestra sus destinos.
	
	La relación binaria $I$ viene reflejada en la Tabla \ref{tabla:ejemploContextoFormal} y muestra los destinos a los que viaja cada miembro de Star Alliance. Por tanto, se tiene el contexto formal $K = (G,M,I)$ en el cual:

	G = \{Air Canada, Air New Zealand, All Nippon Airways, Ansett Australia, The Austrian Airlines Group, British Midland, Lufthansa, Mexicana, Scandinavian Airlines, Singapore Airlines, Thai Airways International, Unites Airlines, VARIG\}

	M = \{Latinoamérica, Europa, Canadá, Asia, Oriente Medio, África, México, Caribe, Estados Unidos\}

\begin{table*}[tb]
\caption{Ejemplo de contexto formal sobre los destinos aéreos del grupo Star Alliance \cite{Ganter2002}}
\label{tabla:ejemploContextoFormal} 
\centering
{\scriptsize
\begin{tabular}{lccccccccc}
\hline
 & \rotatebox{90}{Latinoamérica} & \rotatebox{90}{Europa} & \rotatebox{90}{Canadá} & \rotatebox{90}{Asia} & \rotatebox{90}{Oriente Medio} & \rotatebox{90}{África} & \rotatebox{90}{México} & \rotatebox{90}{Caribe} & \rotatebox{90}{Estados Unidos\ }\\
\hline
Air Canada & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark &  & \checkmark & \checkmark & \checkmark\\
Air New Zealand &  & \checkmark &   & \checkmark  & & & & & \checkmark \\
All Nippon Airways &  & \checkmark &   & \checkmark  & & & & & \checkmark \\
Ansett Australia  &  &  &   & \checkmark  & & & & & \\
The Austrian Airlines Group &  & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark &  &  & \checkmark\\
British Midland &  & \checkmark &  &  &  &  &  &  & \\
Lufthansa & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark &  & \checkmark\\
Mexicana & \checkmark &  & \checkmark &  &  &  & \checkmark & \checkmark & \checkmark\\
Scandinavian Airlines & \checkmark & \checkmark &  & \checkmark &  & \checkmark &  &  & \checkmark\\
Singapore Airlines &  & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark &  &  & \checkmark\\
Thai Airways International & \checkmark & \checkmark &  & \checkmark &  &  &  & \checkmark & \checkmark\\
Unites Airlines & \checkmark & \checkmark & \checkmark & \checkmark &  &  & \checkmark & \checkmark & \checkmark\\
VARIG & \checkmark & \checkmark &  & \checkmark &  & \checkmark & \checkmark &  & \checkmark\\
\hline
\end{tabular}
}
\end{table*}
\end{ejemplo}


\subsection{Operadores de derivación}
\label{subsec:operadoresDerivacion}
Dada una selección $A \subseteq G$ de objetos de un contexto formal\index{contexto formal} $K = (G,M,I)$, se desea caracterizar qué atributos de $M$ son comunes a todos estos objetos. Esto define un operador que produce para cada conjunto de objetos $A \subseteq G$, el conjunto $A$ de sus atributos comunes, y dualmente, a partir de un conjunto de atributos, caracterizar el conjunto de atributos que tienen en común a dichos atributos. Estos operadores se denominan operadores de derivación\index{operadores de derivación} para $K$.
 
\begin{definicion}[Operadores de derivación]
	Dado un contexto formal $K = (G,M,I)$, se definen los operadores de derivación:

$$
\begin{array}{ll}
(\ )'\colon 2^G  \to 2^M
&
(\ )'\colon 2^M  \to 2^G
\\[2mm]
A' = \{m \in M \mid g\I m  \quad \forall g \in A\}\qquad
&
B' = \{g \in G \mid g\I m  \quad \forall m \in B\}
\end{array}
$$
\end{definicion}

Ambas funciones se denotan con el mismo símbolo porque no hay lugar a confusión.

Si $A$ es un conjunto de objetos, entonces $A'$ es un conjunto de atributos, al cual podemos aplicar el segundo operador de derivación para obtener el conjunto de objetos $A''$. De forma dual, comenzando con un conjunto $B$ de atributos, podemos formar el conjunto de atributos $B''$.

De la definición anterior se obtiene que:

%\begin{proposicion}
%	Sean los subconjuntos $A, A_1, A_2 \subseteq G$, se tiene que:
%	\begin{enumerate}
%		\item $A_1 \subseteq A_2 \Rightarrow A^{'}_2 \subseteq A^{'}_1$
%		\item $A \subseteq A''$
%		\item $A = A''''$
%	\end{enumerate}
%\end{proposicion}

El operador de cierre $''$ (i.e. aplicar el operador de derivación $'$ y su dual) verifica algunas propiedades interesantes que serán fundamentales para poder desarrollar la teoría formal.

\begin{definicion}[Operador de cierre]\index{operador de cierre}
	Sea $K\ =\ (G,M,I)$ un contexto formal, entonces el operador $()'' : 2^G \to 2^G$ es un operador de cierre, es decir, satisface las siguientes propiedades:
	\begin{itemize}
		\item Idempotente: $X'''' = X'' \quad \forall X \in 2^M$
		\item Monótona: $X \subseteq Y$ $\rightarrow$ $X'' \subseteq Y'' \quad \forall X,Y \in 2^M$ 
		\item Extensiva: $X \subseteq X'' \quad \forall X \in 2^M$
	\end{itemize}
	
Por dualidad, el resultado es igualmente válido para $()'' : 2^M \to 2^M$.
\end{definicion}

Un conjunto $A \subseteq M$ se denomina \textit{conjunto cerrado} para el operador $''$ si es un punto fijo para $''$, es decir, $A''=A$. Los conjuntos cerrados\index{conjuntos cerrados} permiten definir lo que se denominan \textit{conceptos formales}\index{concepto formal}, los cuales son una noción esencial en FCA y a los que se dedica el siguiente apartado. 


\subsection{Conceptos Formales}
\label{subsec:conceptosFormales}
De forma general, un concepto formal permite describir formalmente un hecho del contexto y caracterizar un conjunto de objetos por medio de los atributos que comparten y viceversa. 

Así, un par $(X,Y)$ con $X\subseteq G$ y $Y\subseteq M$ es un concepto formal cuando se verifica que:
\begin{itemize}
	\item Cada objeto en $X$ tiene todos los atributos de $Y$, y dualmente, cada atributo de $Y$ está presente en cada objeto de $X$.
	\item Para cada objeto en $G$ que no está en $X$, existe un atributo en $Y$ que el objeto no tiene. Dualmente, para cada atributo en $M$ que no está en $Y$, hay un objeto en $X$ que no tiene ese atributo.
\end{itemize}

Se introduce ahora la noción formalmente:

\begin{definicion}[Concepto formal]
	Sea $K = (G,M,I)$ un contexto formal\index{contexto formal} y $A \subseteq G$, $B \subseteq M$. El par (A, B) se denomina concepto formal si $A'=B$ y $B'=A$. El conjunto de objetos $A$ se denomina extensión del concepto (A, B) mientras que el conjunto de atributos $B$ será la intensión del concepto.
\end{definicion}

La descripción de un concepto a través de su extensión e intención es redundante, ya que cada una de las dos partes determina la otra debido a que $B\ =\ A'$ y $A\ =\ B'$, sin embargo, pueden existir ocasiones en las cuales esta descripción redundante puede ser conveniente \cite{Ganter2002}.

Una alternativa gráfica de identificar los conceptos formales es la siguiente. Desde la representación del contexto formal, un concepto formal se puede reconocer por medio de una submatriz de tal manera que se verifican todas las relaciones contenidas en la submatriz (no es necesario que la submatriz esté formada por celdas contiguas). De esta forma, en la Tabla \ref{tabla:extractoEjemploContextoFormal}, se ve como es posible identificar el concepto formal construido con el par (\textit{\{Air New Zealand, All Nippon Airways\},\{Europa, Asia, Estados Unidos\}}) a partir del contexto formal. 

%\begin{table*}[tb]
%\caption{Conceptos formales a partir de la representación del contexto formal.}
%\label{table:conceptosFormales} 
%\centering
%{\scriptsize
%\begin{tabular}{lcccccc}
%\hline
%Modelo de coche & Consumo & Cilindrada & Movilidad & Potencia & Peso & Aceleración\\
%\hline
%Chevrolet Vega &  &  &  & \checkmark &  & \checkmark\\
%Toyota Corolla &  &  &  & \checkmark &  & \\
%Ford Pinto &  &  & \checkmark &  & \checkmark & \\
%Volkswagen Beetle & \checkmark &  & \checkmark & \checkmark & \checkmark & \checkmark \\
%Plymouth Satellite  & \cellcolor{gray!25}\checkmark & \cellcolor{gray!25}\checkmark & \cellcolor{gray!25}\checkmark &  &  & \cellcolor{gray!25}\checkmark \\
%Chevrolet Malibu & \cellcolor{gray!25}\checkmark & \cellcolor{gray!25}\checkmark & \cellcolor{gray!25}\checkmark &  &  & \cellcolor{gray!25}\checkmark \\
%\hline
%\end{tabular}
%}
%\end{table*}

\begin{table*}[tb]
\caption{Extracto del ejemplo de contexto formal sobre los destinos aéreos del grupo Star Alliance \ref{tabla:ejemploContextoFormal}}
\label{tabla:extractoEjemploContextoFormal} 
\centering
{\scriptsize
\begin{tabular}{lccccccccc}
\hline
 & \rotatebox{90}{Latinoamérica} & \rotatebox{90}{Europa} & \rotatebox{90}{Canadá} & \rotatebox{90}{Asia} & \rotatebox{90}{Oriente Medio} & \rotatebox{90}{África} & \rotatebox{90}{México} & \rotatebox{90}{Caribe} & \rotatebox{90}{Estados Unidos\ }\\
\hline
$\left [ \ldots \right ]$ &  &  &  &  &  &  &  &  & \\
\cellcolor{gray!25}Air New Zealand &  & \cellcolor{gray!25}\checkmark &   & \cellcolor{gray!25}\checkmark  & & & & & \cellcolor{gray!25}\checkmark \\
\cellcolor{gray!25}All Nippon Airways &  & \cellcolor{gray!25}\checkmark &   & \cellcolor{gray!25}\checkmark  & & & & & \cellcolor{gray!25}\checkmark \\
$\left [ \ldots \right ]$  &  &  &  &  &  &  &  &  & \\
\hline
\end{tabular}
}
\end{table*}


\subsection{Retículo de conceptos}
\label{subsec:reticuloConceptos}
Un contexto formal\index{contexto formal} puede tener muchos conceptos formales. El conjunto de todos los conceptos formales de un contexto formal $K$ tiene estructura de \textit{retículo} con la relación de orden que se muestra a continuación.

Si $(X_1,Y_1)$ y $(X_2,Y_2)$ son conceptos, se define un orden parcial, $\leq$, de forma que $(X_1,Y_1) \leq (X_2,Y_2)$ si y sólo si $X_1 \subseteq X_2$, o equivalentemente, si $Y_2 \subseteq Y_1$.

%Los pares de conceptos en este orden parcial tienen una única máxima cota inferior, que es el concepto generado por $X_1 \cap X_2$. De forma análoga, poseen una única mínima cota superior, el concepto generado por los atributos $Y_1 \cap Y_2$. Por medio de estas operaciones de cálculo del máximo y del mínimo de dos conceptos, se satisfacen las propiedades que definen un retículo. 

La Figura \ref{figura:ejemploReticuloAerolineas} muestra el retículo de conceptos\index{retículo de concepto} asociado al contexto formal mostrado anteriormente \ref{ejemploContextoFormal}.

\begin{figure}[htbp]
		\begin{center}
			\includegraphics[height=.6\textheight,width=1\textwidth]{ejemploReticuloAerolineas.png}
		\end{center}
		\caption{Retículo de conceptos\index{retículo de conceptos} asociado al contexto formal \ref{ejemploContextoFormal}}
		\label{figura:ejemploReticuloAerolineas}
\end{figure}

En un diagrama como el de la Figura \ref{figura:ejemploReticuloAerolineas}, cada nodo representa un concepto formal. Un concepto $c_1$ es un subconcepto de un concepto $c_2$ si y solo si hay un camino de  descendente desde el nodo que representa $c_2$ al nodo que representa $c_1$. El nombre de un objeto $g$ se asocia al nodo que representa el concepto más pequeño que contiene $g$ en su extensión; dualmente, el nombre de un atributo $m$ va asociado al nodo que representa el concepto más grande con $m$ en su intensión. 

Se pueden comprobar fácilmente las relaciones que existen en el contexto ya que un objeto $g$ tiene un atributo $m$ si y solo si el concepto asociado a $g$ es un \textit{subconcepto} del asociado a $m$. La extensión de un concepto consiste en todos aquellos objetos cuyas etiquetas están asociadas a subconceptos, y, dualmente, la intensión consiste en todos los atributos asociados a \textit{superconceptos}. 

Dicho lo anterior y teniendo en cuenta la sobrecarga que conllevaría representar cada concepto del retículo en la Figura \ref{figura:ejemploReticuloAerolineas}, se puede mencionar aquí como ejemplo, el concepto etiquetado como `Oriente Medio' \textit{(Middle East)}, el cual tiene como extensión el conjunto \{\textit{Singapore Airlines, The Austrian Airlines Group, Lufthansa, Air Canada}\}, y como intensión \{\textit{Middle East, Canadá, Estados Unidos, Europa, Asia}\}.

En la parte superior del retículo, encontramos los destinos que ofrecen la mayoría de las aerolíneas: Europa, Asia Pacífico y los Estados Unidos. Por ejemplo, exceptuando British Midland y Ansett Australia, todas las aerolíneas ofrecen vuelos a Estados Unidos. Esas dos líneas aéreas se encuentran en la parte superior del diagrama, ya que tienen la menor oferta de vuelos, operan sólo en Europa y Asia, respectivamente. 

De esta forma, cuanto más se descienda en el retículo de conceptos, más destinos ofrecerán las aerolíneas. Así, la mayor oferta de destinos se encuentra en las aerolíneas de la parte inferior del retículo: Lufthansa y Air Canada. De forma análoga, cuanto más se descienda en el retículo, serán menos los destinos ofertados, e.g. África, Oriente Medio y el Caribe.



\subsection{Sistema de implicaciones}
\label{subsec:sistemaImplicaciones}
Una noción equivalente al retículo de conceptos es el denominado sistema de implicaciones \cite{Ganter1997}. Como ya se adelantó en el Capítulo \ref{cap:introduccion}, las implicaciones constituyen el eje fundamental de trabajo en esta tesis doctoral. Reflejan una forma relativamente sencilla de representar las relaciones lógicas que se encuentran entre los atributos que poseen los objetos del contexto formal ya que combinan una forma muy simple y natural de escribir reglas del tipo \textit{si-entonces}\index{if-then rules} con una gestión automatizada de la información.

Para introducir el trabajo realizado utilizando la lógica sobre los conjuntos de implicaciones, se va a proceder describiendo los componentes habituales de una lógica: su lenguaje, semántica, sistema axiomático y método de razonamiento automático. No obstante, como se ha comentado anteriormente, los conjuntos de implicaciones se han utilizado para diferentes campos de conocimiento (FCA, bases de datos y sistemas de recomendación). En consecuencia, en este punto se presentan los elementos de la lógica que serán comunes a todos ellos, en concreto, el lenguaje. El resto se presentará para cada una de las secciones correspondientes \ref{sec:basesDatosRelacionales} y \ref{sec:logicaSimplificacion}.

\subsection*{Lenguaje}
\noindent
\begin{definicion}
	Dado un conjunto $M$ finito de símbolos (denominados atributos) no vacío, el lenguaje sobre $M$ se define como: 
$$
\mathcal L_M = \{A\to B\mid A,B\subseteq M\}
$$
\end{definicion}

Las fórmulas $A \to B$ se denominan \emph{implicaciones} y los conjuntos $A$ y $B$ reciben el nombre de \emph{premisa} y \emph{conclusión} de la implicación\index{Implicación} respectivamente. Los conjuntos $\sum \subseteq \mathcal L_M$ se denominan \emph{sistemas de implicaciones} sobre $M$.

Se utilizará la siguiente notación:
\begin{itemize}
	\item Se utilizarán letras minúsculas para denotar los elementos en $M$, mientras que las mayúsculas denotan sus subconjuntos.
	\item Se omiten las llaves en premisas y conclusiones, es decir, $abcde$ denota el conjunto $\{a,b,c,d,e\}$.
	\item Se escriben los elementos de $2^M$ por yuxtaposición, es decir, para $X \cup Y$ se escribirá $XY$.
	\item Para la diferencia, se utiliza $X-Y$ por $X \smallsetminus Y$.
\end{itemize}

%\begin{definicion}[Implicación]\index{Implicación}
%	Una implicación sobre un conjunto de atributos $M$ es una expresión de la forma $X \to Y$, donde $X$ e $Y$ son conjuntos de atributos, i.e. $X \subseteq M$ y $Y \subseteq M$.
%\end{definicion}

\begin{definicion}[Implicación trivial]\index{Implicación!trivial}
	Una implicación $X \to Y$ es trivial si $Y \subseteq X$.
\end{definicion}

\begin{definicion}[Implicación unitaria]\index{Implicación!unitaria}
	Una implicación se dice unitaria si su conclusión es un conjunto unitario, i.e. $X \to a$.
\end{definicion}


\subsection*{Semántica}
\noindent
Tras la definición del lenguaje se pasa ahora a introducir la semántica utilizada, para lo cual se va a utilizar el concepto de \textit{operador de cierre}\index{operador de cierre} definido anteriormente.

%Un operador de cierre $c$ en $M$ recibe el nombre de \emph{modelo} para una implicación $A\to B\in\mathcal L_M$ si $B\subseteq  c(A)$; se denota $c\models A\to B$. Además, dado un sistema de implicaciones $\Sigma\subseteq \mathcal L_M$ y un operador de cierre $c$ en $M$, $c\models \Sigma$ denota que $c\models A\to B$ para todo $A\to B\in \Sigma$.

%Se dice que una implicación $X \to Y$ se cumple en un contexto formal $K$ si y sólo si cada objeto $A \in G$ que tiene todos los atributos de $X$ también tiene todos los atributos de $Y$.

%En definitiva, $\Sigma \models A\to B$ si cada modelo de $\Sigma$ es un modelo para $A\to B$, y $\Sigma_1 \equiv \Sigma_2$ si sus modelos representan el mismo conocimiento.

\begin{definicion}[Modelo]\index{Modelo}
	Sea $K=(G,M,I)$ un contexto formal\index{contexto formal} y sea $A\to B \in \mathcal L_M$. El contexto K es un modelo para $A\to B$ si $B \subseteq A''$. Se denota por $K\models A\to B$.
\end{definicion}

La noción de modelo puede extenderse a los sistemas de implicaciones de la siguiente manera. Dado $\Sigma\subseteq \mathcal L_M$, la expresión $K\models \Sigma$ indica que $\Sigma \models A\to B$ para toda $A \to B \in \Sigma$.

\begin{ejemplo}
	De la información mostrada en el contexto formal \ref{tabla:ejemploContextoFormal} se puede identificar que: $K \models Caribe \to Latinoamerica$. Y también que: $K \not\models Caribe \to Mexico$.
\end{ejemplo} 

\begin{ejemplo}
	Sea $M = \{a,b,c,d\}$ un conjunto de atributos. Se cumple que $\{a\to b, a\to c\} \equiv \{a\to bc\}$ porque para cada contexto formal $K = (G,M,I)$, se verifica que $\{b,c\}' = \{b\}' \cup \{c\}'$. Por tanto, $\{a\}' \subseteq \{b\}'$ y $\{a\}' \subseteq \{c\}'$ si y sólo si $\{a\}' \subseteq \{b,c\}'$.
\end{ejemplo}

\begin{proposicion}
	Sea $M$ un conjunto de atributos y $\Sigma \subseteq \mathcal L_M$. Se verifica que:
	\[
		\Sigma \equiv \bigcup_{A\to B \in \Sigma} \{A \to b \mid b \in B\}
	\]
\end{proposicion}

Un ejemplo básico de implicaciones puede verse utilizando nuevamente la información de la Tabla \ref{tabla:ejemploContextoFormal}. En ese ejemplo puede apreciarse una relación que siempre se cumple y es la siguiente. Si la aerolínea provee servicio de vuelo a \textit{Latinoamérica} entonces también ofrece como destino \textit{Estados Unidos}. He ahí un claro ejemplo de regla \textit{si-entonces} o implicación (en este caso, unitaria), que se verifica en el contexto.

Las implicaciones se interpretan de forma conjuntiva, es decir, corresponden a las fórmulas $a_1\land \ldots\land a_n \to b_1\land \ldots\land b_m$ donde las proposiciones $a_1, \ldots  a_n,  b_1, \ldots, b_m$ son elementos del conjunto $M$.

%Por completitud, el conjunto de todas las implicaciones que se verifican en ese contexto es: 
%
%\noindent
%$\Sigma\ =\ \{$ 
%
%$Europa,\ Estados\  Unidos \rightarrow Asia$;
%
% $Asia,\  Estados\  Unidos \rightarrow Europa$; 
% 
% $Latinoamerica \rightarrow Estados\  Unidos$; 
% 
% $Canada \rightarrow Estados\  Unidos$; 
% 
% $Europa,\  Asia \rightarrow Estados\  Unidos$;  
% 
% $Africa \rightarrow Europa,\  Asia,\  Estados\  Unidos$; 
% 
% $Mexico \rightarrow Latinoamerica,\  Estados\  Unidos$; 
% 
% $Caribe \rightarrow Latinoamerica,\  Estados\  Unidos$; 
% 
% $Latinoamerica,\  Canada,\  Estados\  Unidos \rightarrow Mexico$; 
% 
% $Europa,\  Canada,\  Asia,\  Africa,\  Estados\  Unidos \rightarrow Oriente\  Medio$; 
% 
% $Oriente\  Medio \rightarrow Europa,\  Canada,\  Asia,\  Estados\  Unidos$;
% 
% $Latinoamerica,\  Mexico,\  Caribe,\  Estados\  Unidos \rightarrow Canada$
% 
%\noindent
% $\}$.

Al comenzar el capítulo se habló de la equivalencia entre el retículo de conceptos y las implicaciones; tras haber introducido formalmente el lenguaje y la semántica de las implicaciones, ahora ya se pueden mencionar ejemplos de esta equivalencia utilizando la información del retículo \ref{figura:ejemploReticuloAerolineas}. Así, es posible identificar ejemplos de implicaciones tales como:

$\{Canada \rightarrow Estados\  Unidos,$

$Oriente\  Medio \rightarrow Europa,\  Canada,\  Asia,\  Estados\  Unidos\}$;

Se puede considerar a las implicaciones y el retículo de conceptos como distintas alternativas de tratar la información que se puede extraer de un contexto formal\index{contexto formal}. No obstante, los retículos de conceptos permiten una representación gráfica, mientras que la característica fundamental, desde el punto de vista de esta tesis doctoral, es que los sistemas de implicaciones proporcionan una manipulación simbólica usando la lógica de implicaciones, y por tanto, permiten el razonamiento automático.

Como se ha mencionado anteriormente, se entra ahora en la segunda sección de este capítulo en la cual se van a utilizar las implicaciones en el entorno de las bases de datos relacionales, donde recibirán el nombre de Dependencias Funcionales.



\section{Bases de Datos Relacionales}\index{Bases de Datos Relacionales}
\label{sec:basesDatosRelacionales}
El modelo de base de datos relacional aparece en el exitoso artículo de Edgar Frank Codd en 1970 \cite{Codd1970}. Codd propuso que los sistemas de bases de datos deberían presentarse al usuario con una vista de datos organizada en forma de tablas bidimensionales (filas y columnas) que denominó \textit{relaciones}. La Tabla \ref{tabla:ejemploPeliculas} es un ejemplo de relación en el que cada fila representa una película y cada columna una propiedad de la película. 

En un esquema relacional se pueden encontrar los siguientes elementos:
\begin{itemize}
	\item \textbf{Atributo}\index{atributo}. Cada una de las columnas de un relación se denomina atributo. En el ejemplo \ref{tabla:ejemploPeliculas} los atributos son: Título, Año, País, Director, Nacionalidad, Actor.
	\item \textbf{Tupla}\index{tupla}. Se denomina tupla a cada fila de una relación exceptuando la fila que contiene a los atributos.
	\item \textbf{Dominio}\index{dominio}. El modelo relacional requiere que cada componente de cada tupla sea atómico. No se permite que un valor de la tupla sea una estructura de datos (e.g. una lista, una matriz, un conjunto, etc.) cuyos valores puedan dividirse en componentes más pequeños. De esta forma, se establece que cada atributo de la relación está asociado a un dominio, i.e. un tipo particular de dato.
\end{itemize}

%Las relaciones son conjuntos de tuplas, no listas de tuplas y por tanto, el orden en que el se presenten las tuplas de una relación es irrelevante. De hecho, se puede incluso modificar el orden de aparición de los atributos y la relación se mantiene constante.

Formalmente, en el modelo relacional, una base de datos consiste en una o más relaciones \cite{Elmasri2010}. La planificación de la estructura de la base de datos, en particular de las relaciones, es vital para la gestión efectiva de la misma \cite{Harrington2016}. Una relación $R$ definida sobre un conjunto de dominios $D_1$, $D_2$, ..., $D_n$ está formada por un esquema y un cuerpo como se definen a continuación.

\begin{definicion}[Esquema]\index{Esquema}
	Un esquema $E$ para una relación $R$ se define como un conjunto fijo de pares \textit{(atributo:dominio)}. Habitualmente se denota como $\{(A_1:D_1),\ (A_2:D_2),\ (A_n:D_n)\}$ donde cada $A_j$ corresponde a un único $D_j$ y los $A_j$ son todos distintos.
\end{definicion}

En el ejemplo \ref{tabla:ejemploPeliculas}, el esquema sería: 

\noindent
\textit{\{}

\textit{Título:Cadena de caracteres, Año:Número natural, País:Cadena de caracteres, Director:Cadena de caracteres, Nacionalidad:Cadena de caracteres, Actor:Cadena de caracteres}

\noindent
\textit{\}}.

El conjunto de los esquemas para las relaciones de una base de datos se denomina \textit{esquema de base de datos relacional}.

\begin{definicion}[Cuerpo]\index{Cuerpo}
	Un cuerpo $C$ para una relación $R$ se define como un conjunto de tuplas de pares \textit{(atributo:valor)}. Habitualmente se denota como $\{(A_1:v_{i1}),\ (A_2:v_{i2}),\ (A_n:v_{in})\}$ con $i = 1,2,...,m$ tal que $m$ es el cardinal de $R$, i.e. el número de tuplas de la relación. En cada $(A_j:v_{ij})$ se tiene que $v_{ij} \in D_j$.
\end{definicion}

En el ejemplo \ref{tabla:ejemploPeliculas}, un extracto del cuerpo sería:

\noindent
\textit{\{}

	\textit{[(Título:Pulp Fiction), (Año:1994), (País:USA), (Director:Quentin Tarantino), (Nacionalidad:USA), (Actor:Uma Thurman)],}

 \textit{[(Título:King Kong), (Año:2005), (País:NZ), (Director:Peter Jackson), (Nacionalidad:NZ), (Actor:Naomi Watts)], }
 
 \textit{...}
 
\noindent
\textit{\}}.

%Un diseño impreciso de un esquema de base de datos relacional puede generar ciertas anomalías que provoquen el mal funcionamiento del sistema. Una anomalía es una inconsistencia entre una parte de los datos y otra. Los principales tipos de anomalías aparecen a la hora de operar con el sistema en términos de actualizaciones, eliminaciones o inserción de información redundante \cite{Vavilis2015,Costante2017}.



\subsection{Dependencias Funcionales}
\label{subsec:dependenciasFuncionales}
Existen muchas restricciones que el modelo relacional permite establecer en las relaciones de los esquemas de la base de datos. Concretamente, esta parte de la tesis está enfocada en las restricciones denominadas dependencias funcionales.

\begin{definicion}[Dependencia Funcional]\index{dependencias funcionales}
	Sea M un conjunto de atributos. Una dependencia funcional (FD) sobre M es una expresión de la forma $X \rightarrow Y$, donde $X,\ Y$ son conjuntos de atributos.
\end{definicion}

Teniendo en cuenta que la sintaxis que se va a utilizar para FD es la misma que para implicaciones, existen tipos de FD denominados triviales y unitarias, cuyas nociones son iguales a las introducidas para implicaciones en \ref{subsec:sistemaImplicaciones}. Se pasa ahora a describir la semántica para las FD.

%\begin{definicion}[Dependencia Funcional Trivial]
%	Una dependencia funcional es trivial si $X \subseteq Y$.
%\end{definicion}
%
%\begin{definicion}[Dependencia Funcional Unitaria]
%	Una dependencia funcional es unitaria cuando su conclusión es un conjunto unitario, es decir, $X \rightarrow a \ \mid \ a \in M$.
%\end{definicion}
%
%\begin{definicion}[Esquema Relacional]
%	Un esquema de relación \df es un par ordenado que consiste en un conjunto de atributos $M$ y un conjunto $F$ de FD sobre $M$.
%\end{definicion}

\subsection*{Semántica}
\noindent
Una FD se satisface en una tabla $R$ si para cada dos tuplas\index{tupla} de $R$, si verifican $X$, entonces verifican $Y$. Intuitivamente, una FD $X \rightarrow Y$ indica que el conjunto de atributos $X$ determina el conjunto de atributos $Y$, lo cual refleja fielmente el concepto de regla \textit{si-entonces} que definen las implicaciones y se acerca a la definición de una función entre los dominios de $A$ y $B$, $f: A\to B$. Entonces, ¿por qué el cambio de denominación? 

En la Sección \ref{subsec:sistemaImplicaciones} se definió la noción de implicación, denotado por $X \rightarrow Y$, y se dijo que una implicación se verifica en un contexto formal\index{contexto formal} $K$ si cada objeto del contexto que contenga los atributos de $X$ también tiene los de $Y$, sin embargo, en una FD, no sólo esos atributos tienen que aparecer en ambos conjuntos sino que además su \textit{valor} ha de ser el mismo.

Esta es una diferencia esencial que surge del hecho de que en contextos formales se trata con una relación binaria $I$ entre los objetos y los atributos del contexto, mientras que en esquemas relacionales, los atributos pueden ser valores \textit{multivaluados} y por tanto, para que una FD se verifique, han de coincidir los valores  de la relación.

Para ilustrar de una forma más sencilla esta diferencia vamos a utilizar el siguiente ejemplo:
\begin{ejemplo}
Sea el contexto formal $K=(G,M,I)$ representado en \ref{tabla:ejemploContextoFormal} donde los objetos son $g_i \in G$ y los atributos $a,b,c \in G$.

Según la definición de implicación \ref{subsec:sistemaImplicaciones}, se puede ver como se verifica la implicación $a \to c$ en $K$, mientras que por el contrario, al considerar la relación como una tabla del modelo relacional y considerando la definición de FD, no se cumple que $a \to c$ debido al último objeto $g_4$. 
	\begin{table*}[htbp]
	\caption{Ejemplo de contexto formal para ilustrar la diferencia entre implicación y dependencia funcional}
	\label{tabla:ejemploContextoFormal}
	\centering
	{\scriptsize
	\begin{tabular}{cccccc}
 		%\hline
  	& a & b & c \\
 		\hline
 		$g_1$ & 1 & 0 & 1\\
 		$g_2$ & 1 & 1 & 1\\
 		$g_3$ & 0 & 0 & 0\\
 		$g_4$ & 0 & 1 & 1\\
 		%\hline
	\end{tabular}
	}
\end{table*}
\end{ejemplo}

%Para ilustrar de una forma más sencilla esta diferencia se puede contrastar la información que refleja el contexto formal del ejemplo \ref{tabla:ejemploContextoFormal} con la Tabla \ref{tabla:ejemploPeliculas}. En el primero se ve como los valores de la relación pueden considerarse binarios en el sentido de que indican si una aerolínea ofrece vuelo a un destino o no. Sin embargo, en el segundo, la tabla refleja diferentes valores para cada uno de los atributos del esquema (nombres propios, años, etc.). 

%De esta manera, una implicación que verifica en ese contexto formal es $Canada \rightarrow Estados\ Unidos$, mientras que una FD que se verifica en el esquema relacional puede ser $Director \rightarrow Nacionalidad$. Sin embargo, nótese que por contra, la FD $Director \rightarrow Titulo$ no es válida pues existe más de una tupla de la relación cuyos valores para esos atributos no coinciden, Quentin Tarantino dirige tanto \textit{Pulp Fiction} como \textit{Django Unchained}.

El concepto de implicaciones en FCA puede ampliarse para poder tratar con contextos formales donde la relación $I$ toma valores en un conjunto en lugar de ser binaria. Este tipo de contextos formales\index{contexto formal} se denominan multivaluados y su aproximación se realiza a través del llamado análisis de conceptos formales difusos \cite{Burusco1998,Belohlavek2000}, lo que queda fuera del ámbito de esta tesis doctoral.

%tratar situaciones multivaluadas otorgando valores, por ejemplo, dentro de un rango [0,1], pero en ese caso, se entraría en lo que se denomina implicaciones difusas  \cite{Baczynski2008} que es otro campo de conocimiento que queda fuera del ámbito de esta tesis doctoral.

Como consecuencia de lo anterior, la noción de FD es de gran importancia en la tesis debido a que es la base para el trabajo realizado sobre el problema de la enumeración de todas las claves minimales de esquemas relacionales.

Una clave en bases de datos relacionales está constituida por un subconjunto de los atributos del esquema de una tabla tal que los valores de esos atributos identifican unívocamente a cada tupla de la tabla. Se puede definir por medio de FD de la siguiente forma:

\begin{definicion}[Clave]\index{clave}
	Dada una tabla $R$ sobre el conjunto de atributos $M$, se dice que $K \subseteq M$ es una clave de $R$ si la FD $K \rightarrow M$ se verifica en $R$.
\end{definicion}

\begin{definicion}[Clave Minimal]\index{clave!claves minimales}
	Dada una tabla $R$, el conjunto de atributos $K \subseteq M$ se dice que es una clave minimal si $K$ es clave y para todo atributo $k \in K$ el subconjunto $K - \{k\}$ no es clave de $R$.
\end{definicion}

\begin{definicion}[Superclave]
	El conjunto de atributos $K \subseteq M$ se dice que es una superclave de $R$ si $K$ es una clave de $R$ y no es minimal.
\end{definicion}

Finalmente, a través de las FD que se verifican en un determinado esquema relacional y por medio de la lógica que se introduce a continuación, se ha realizado un amplio estudio de los métodos de enumeración de claves basados en el paradigma de Tableaux\index{Tableaux} \cite{Morgan1992,Risch1992} y el diseño de nuevos métodos que mejoran a los existentes en la literatura. El trabajo ha conllevado además una exhaustiva labor en cuanto a experimentos y pruebas para verificar las mejoras alcanzadas. Debido a los requerimientos que alcanza el problema de la enumeración de claves cuando la información de entrada es considerable, la mayor parte de estos experimentos ha supuesto utilizar el paralelismo\index{paralelismo} en las implementaciones y recursos de supercomputación\index{supercomputación} como se puede comprobar en algunas de las publicaciones que avalan esta tesis \cite{Benito-Picazo2014,Benito-Picazo2016}.   



\section{Lógica de Implicaciones}
\label{sec:logicaSimplificacion}
En esta sección se va a introducir las lógicas de implicaciones que permitirán disponer de sistemas axiomáticos correctos y completos para trabajar con ellas. Para ello, el punto de partida van a ser los Axiomas de Armstrong como pionero en el campo. Sin embargo, el sistema de Armstrong no es adecuado para el razonamiento automático debido a su fuerte dependencia a la transitividad. En consecuencia, tras los Axiomas de Armstrong se presenta la lógica \slfd, la cual sí va a permitir desarrollar métodos de razonamiento automático.

Ambas lógicas pueden aplicarse con éxito para trabajar con implicaciones y con FD. El lenguaje sobre el que van a trabajar ambas lógicas es el mismo que se definió en \ref{subsec:sistemaImplicaciones}. Del mismo modo, la semántica también quedó definida en sendos apartados, \ref{subsec:sistemaImplicaciones}, \ref{subsec:dependenciasFuncionales}, para implicaciones y FD respectivamente. Por tanto, en los siguientes apartados se analizarán los sistemas axiomáticos y métodos de razonamiento.

\subsection{Axiomas de Armstrong}
\label{subsec:axiomasArmstrong}
Los conocidos Axiomas de Armstrong\index{Axiomas de Armstrong} es el primer sistema descrito para tratar sistemas de implicaciones utilizando la lógica \cite{Armstrong74}. Este sistema ha tenido una clara influencia en el diseño de varias lógicas sobre implicaciones, todos ellas construidas alrededor del paradigma de la transitividad. Con el paso de los años, otros trabajos han propuesto sistemas axiomáticos equivalentes \cite{Ibaraki1999,Atzeni1993,Paredaens89}.

Este sistema axiomático\index{sistema axiomático} está formado por un axioma, denominado \textit{Reflexivo}: 

\begin{center}
	{\scriptsize \tt{[Ref]}}\ $\displaystyle\frac{}{AB \to A}$
\end{center}

y dos reglas de inferencia, \textit{Aumentativa} y \textit{Transitiva} que se definen como:

\begin{center}
	{\scriptsize \tt{[Aug]}}\ $\displaystyle\frac{A \to B\cup C}{AC \to BC}$ \quad
	{\scriptsize \tt{[Tran]}}\ $\displaystyle\frac{A \to B,\ B \to C}{A \to C}$ 
\end{center}

El sistema axiomático de Armstrong se va a definir sobre el lenguaje introducido en la sección \ref{subsec:sistemaImplicaciones}. Sin embargo, debido al rol central que desempeña la transitividad en ese sistema axiomático, el desarrollo de métodos ejecutables para resolver problemas de implicaciones se ha mostrado infructuoso y se ha tenido que recurrir a métodos indirectos. El estudio de estos métodos se verá en la Sección \ref{sec:metodoRazonamientoAutomatico}.

Los Axiomas de Armstrong son válidos al generar sólo implicaciones dentro del cierre del conjunto de implicaciones\index{conjuntos de implicaciones} (denotado como $F^+$) cuando se actúa sobre el conjunto $F$. También son completos ya que la aplicación repetitiva de las reglas generarán todas las implicaciones en el conjunto cerrado $F^+$.

Por todo lo anterior, si bien es cierto que el sistema de Armstrong es un trabajo que acumula innumerables citas en diferentes trabajos a lo largo de los años, su utilidad práctica se ve limitada. Por esa razón, su uso está enfocado al estudio teórico de las implicaciones en vez de al desarrollo de algoritmos automáticos. No obstante, como se ha mencionado, es un buen punto de partida para el desarrollo de nuevas lógicas para el tratamiento de las implicaciones, en concreto, para la lógica \slfd.

La lógica \slfde evita el uso de la transitividad y se guía por la idea de simplificar el conjunto de implicaciones mediante la eliminación atributos redundantes de manera eficiente \cite{Enciso2002}. Por consiguiente, la introducción de la lógica \slfde abrió la puerta al desarrollo de métodos de razonamiento automatizados directamente basados en su novedoso sistema axiomático \cite{CorderoEMG14, CorderoEMOR15}. La posibilidad de desarrollar estas aplicaciones ha sido la motivación principal para el desarrollo de esta tesis, buscando sobre todo, mejorar la eficacia y la eficiencia.



\subsection{Lógica \slfd}
\label{subsec:logicaSLFD}
Se introduce ahora la lógica \slfde\index{\slfde} \cite{Enciso2002}. Para ello, se va a empezar definiendo su sistema axiómatico, pues como se ha indicado al comienzo de esta sección, el lenguaje y la semántica será la misma que la introducida anteriormente en \ref{subsec:sistemaImplicaciones} y \ref{subsec:dependenciasFuncionales}.

\subsection*{Sistema Axiomático}
\noindent
\slfde se define como el par ($L_{FD}, S_{FD}$) donde $S_{FD}$ tiene el siguiente esquema axiomático:

\begin{center}
{\scriptsize \tt{[Ref]}}\quad $\displaystyle\frac{}{A\cup B \to A}$  
\end{center}

\noindent
junto con las siguientes reglas de inferencia\index{reglas de inferencia}, denominadas \emph{fragmentación}\index{reglas de inferencia!fragmentación}, \emph{composición}\index{reglas de inferencia!composición} y \emph{simplificación}\index{reglas de inferencia!simplificación} respectivamente.

\begin{center}
	{\scriptsize \tt{[Frag]}}\ $\displaystyle\frac{A\to B\cup C}{A\to B}$  \quad
	{\scriptsize \tt{[Comp]}}\ $\displaystyle\frac{A\to B,\ C \to D}{A\cup C \to B\cup D}$ \quad
	{\scriptsize \tt{[Simp]}}\ $\displaystyle\frac{A\to B,\ C \to D}{A\cup(C\smallsetminus B)\to D}$
\end{center}

Se destaca que el lenguaje \slfde considera como fórmulas válidas aquellas en donde cualquiera de sus dos partes puede ser el conjunto vacío, denotado $A \to \varnothing$ y $\varnothing \to A$. Sus significados fueron discutidos en \cite{Enciso2002}. En ese trabajo, también se presenta el siguiente resultado donde la derivación de una implicación $A \to B$ se reduce a la derivación de la fórmula $\varnothing \to B$ teniendo $\varnothing \to A$. Este resultado se usará más adelante en el diseño de nuestro novedoso método de cierre \ref{subsec:cierreSLFD}.

\begin{proposicion}
Para cualquier $\varGamma$ y $\forall X, Y\subseteq M$, $\varGamma \vdash X\to Y$ si y sólo si $\varGamma \cup \{\top \to X\} \vdash\top \to Y$
\end{proposicion}


\begin{definicion}
Se dice que una implicación $A\to B$ se deriva sintácticamente de un sistema de implicaciones $\Sigma$, y se denota por $\Sigma\vdash A\to B$, si existe una secuencia de implicaciones $\sigma_1,\dots,\sigma_n \in \mathcal L_M$ tal que $\sigma_n=(A\to B)$ y, para todo $1\leq i\leq n$, la implicación $\sigma_i$ satisface una de las siguientes condiciones:
	\begin{itemize}
		\item $\sigma_i$ es un axioma, es decir, verifica el esquema {\tt [Ref]}.
		\item $\sigma_i\in \Sigma$.
		\item $\sigma_i$ se obtiene a partir de implicaciones pertenecientes a $\{\sigma_j\mid 1\le j<i\}$ aplicando las reglas de inferencia {\tt [Frag]}, {\tt [Comp]} o {\tt [Simp]}.
	\end{itemize}
\end{definicion}

La secuencia $\sigma_1,\dots,\sigma_n$ constituye una \emph{demostración} para $\Sigma\vdash A\to B$.

La derivación sintáctica\index{derivación sintáctica} proporciona una gestión automatizada de las implicaciones. En particular, se puede usar para resolver el denominado problema de las implicaciones: dado un conjunto de implicaciones $\Gamma$ y una implicación $A\to B$, queremos responder si $A\to B$ se deduce de $\Gamma$. Este problema se puede abordar utilizando el operador de cierre.

El sistema axiomático es válido y completo, es decir, se cumple que la derivación sintáctica y semántica\index{derivación semántica} coinciden. Esto significa que cada regla que se puede deducir con este sistema puede derivarse semánticamente (el sistema axiomático es válido) y viceversa (el sistema axiomático es completo).

\begin{theorem}
Sea $M$ un conjunto finito no vacío de atributos, $\Sigma \subseteq \mathcal L_M$ y $A\to B \in \mathcal L_M$. Entonces, $\Sigma\models A\to B$ si y sólo si $\Sigma\vdash A\to B$.  
\end{theorem}

La derivación sintáctica conduce a un nuevo operador de cierre denominado \textit{cierre sintáctico}.

\begin{definicion}
	Dado un conjunto de implicaciones $\Sigma \subseteq \mathcal L_M$, un conjunto $X \subseteq M$ se dice cerrado respecto de $\Sigma$ si $A \subseteq X$ implica $B \subseteq X$ para toda $A\to B\in \Sigma$. Debido a que $M$ es cerrado con respecto a $\Sigma$ y cualquier intersección de conjuntos cerrados es cerrada, podemos definir el siguiente operador de cierre:
$$
(\ )^+_\Sigma\colon 2^M\to 2^M\quad X^+_\Sigma=\bigcap\{Y\subseteq M\mid Y\text{ es cerrado w.r.t }\Sigma\text{ y }X\subseteq Y \}
$$
\end{definicion}

El siguiente teorema es esencial para calcular cierres y a su vez también para introducir un método de razonamiento automático.
 
\begin{theorem}[Teorema de deducción]\index{Teorema de deducción}
\label{empty_set}
	Sea $A\to B\in\mathcal L_M$ y $\Sigma\subseteq \mathcal L_M$. Entonces, 
%\vspace*{-0.2cm}
	$$\Sigma \vdash A\to B \quad \mbox{sii} \quad B\subseteq A^+_\Sigma\quad \mbox{sii} \quad 
 	\{\varnothing\to A\} \cup \Sigma \vdash\{\varnothing\to B\}$$
\end{theorem}
 
\begin{corolario}
	Sea $\Sigma\subseteq \mathcal L_M$. $\forall X\subseteq M$, se tiene que 
	$$
	X^+_\Sigma=\max\{Y\subseteq M\mid \Sigma\vdash X\to Y \}.
	$$
\end{corolario}

La principal ventaja de la lógica \slfde radica en que las reglas de inferencia pueden considerarse reglas de equivalencia. Como consecuencia, se ha podido utilizar como núcleo principal para el desarrollo de métodos automáticos para diversas aplicaciones (e.g. obtener claves minimales, cálculos del cierre) como se verá más adelante. Un estudio más detallado al respecto, incluyendo teoremas y demostraciones, puede verse en \cite{Mora2012}.

\slfde\index{\slfde} constituye una lógica válida y completa \cite{Enciso2002} en la que el principal elemento del lenguaje son las implicaciones.



\section{Método de Razonamiento Automático}
\label{sec:metodoRazonamientoAutomatico}


\subsection{Problema de las implicaciones}
\label{subsec:problemaImplicaciones}
El problema de las implicaciones es crucial en el diseño de un sistema de razonamiento y como tal, existen desde hace años notables estudios al respecto en diferentes áreas, incluyendo las bases de datos relacionales \cite{Armstrong74,Beeri1977,Maier1979}.

Básicamente, el problema de las implicaciones es el siguiente: dado un conjunto finito de implicaciones, determinar mediante la lógica si a partir de ese conjunto se puede inferir una nueva implicación. Dicho de otro modo, si tenemos el conjunto de implicaciones $\Sigma$, el problema consiste en comprobar si se verifica $\Sigma \vdash A \to B$ \cite{Beeri1981,Mitchell1983}.

Claramente, la primera pregunta que surge es si el problema de las implicaciones tiene solución, es decir, si existe algún método que proporcione una respuesta positiva o negativa para cualquier instancia dada del problema. Para ello, un método es a través de axiomas. Un \textit{axioma de inferencia} es una regla que establece que si una relación satisface ciertas dependencias, entonces debe satisfacer otras. Dado un conjunto de implicaciones $\Sigma$ y un conjunto de axiomas de inferencia, el \textit{cierre} de $\Sigma$, denotado por $\Sigma^+$, es el menor conjunto que contiene a $\Sigma$ tal que no es posible aplicar los axiomas de inferencia para derivar una dependencia que no esté en $\Sigma$. En otras palabras, del conjunto $\Sigma$ se deriva una dependencia $\sigma$, denotado $\Sigma \vdash \sigma$, si $\sigma \in \Sigma^+$.



\subsection{Cierre clásico}
\label{subsec:cierreClasico}
El problema de las implicaciones se ha abordado tradicionalmente utilizando un método básico que recibe $A\subseteq M$ como entrada y utiliza de forma exhaustiva la relación de subconjuntos recorriendo iterativamente $\Gamma$ y agregando nuevos elementos al cierre. Este método, fue propuesto en la década de 1970 por Maier \cite{Maier83} y puede considerarse la base principal donde se han sustentado tantos otros. Puede verse en detalle en el Algoritmo \ref{algoritmo:cierreUllman}\index{Cierre clásico}.
\begin{algorithm2e}
%\footnotesize
%\SetAlgoLined
%\SetAlgoFuncName{SchemePruning}
%\dontprintsemicolon
%\KwIn{}
\KwData{$ \varGamma$, $A$}
\KwResult{$A^+_\Gamma$ }
%\KwOut{$X^+$}
    \Indp
    \Begin{
     $A^+_\Gamma:=A$
		
     \Repeat{$A^+_\Gamma=A^\prime$}{
        $A^\prime:=A^+_\Gamma$
				
       \ForEach{ $X \to Y \in  \varGamma$}{
           \If{$X \subseteq A^+_\Gamma$ {\bf and} $Y\not\subseteq A^+_\Gamma$}{
               $A^+_\Gamma:=A^+_\Gamma \cup \{Y\}$
           }%end if
       }% end foreach
		}%until 
   return $A^+_\Gamma$
   }%end begin
 \caption{Cierre clásico}
 \label{algoritmo:cierreUllman}
\end{algorithm2e}

Más tarde, varios autores han desarrollado otros métodos mediante el uso de diferentes técnicas, resolviendo eficientemente este problema en tiempo lineal. En \cite{Paredaens1989}, los autores muestran que la complejidad del problema del cierre es $\mathtt{O}(|{\mathcal{A}}|\, |{ \varGamma}|)$. Además, como se muestra a continuación, en \cite{Mora2012}, los autores presentan un método de cierre de atributos estrechamente relacionado con el sistema axiomático \slfd. También se demuestra que el método tiene un mejor rendimiento que aquellos basados en el cierre clásico.



\subsection{Cierre \slfd}
\label{subsec:cierreSLFD}
Antes de pasar a exponer el algoritmo del cierre \slfd, se muestra el siguiente teorema, el cual es esencial para calcular cierres y a su vez también para introducir un método de razonamiento automático.
 
\begin{theorem}[Teorema de deducción]\index{Teorema de deducción}
\label{empty_set}
	Sea $A\to B\in\mathcal L_M$ y $\Sigma\subseteq \mathcal L_M$. Entonces, 
%\vspace*{-0.2cm}
	$$\Sigma \vdash A\to B \quad \mbox{sii} \quad B\subseteq A^+_\Sigma\quad \mbox{sii} \quad 
 	\{\varnothing\to A\} \cup \Sigma \vdash\{\varnothing\to B\}$$
\end{theorem}
 
\begin{corolario}
	Sea $\Sigma\subseteq \mathcal L_M$. $\forall X\subseteq M$, se tiene que 
	$$
	X^+_\Sigma=\max\{Y\subseteq M\mid \Sigma\vdash X\to Y \}.
	$$
\end{corolario}

El método de razonamiento automático en \slfde se basa en el Teorema de Deducción\index{Teorema de deducción} y un conjunto de equivalencias \cite{Mora2012}. Siguiendo la forma habitual, dos sistemas de implicaciones $\Sigma_1,\Sigma_2\subseteq \mathcal L_M$ se dicen equivalentes si sus modelos coinciden, es decir, se cumple que para todo operador de cierre en $M$, $c\models \Sigma_1$ si y sólo si $c\models \Sigma_2$.

La siguiente proposición proporciona las tres equivalencias, denominadas también: \textit{Fragmentación, Composición y Simplificación}, que se se aplican y justifican el nombre de la lógica \slfde porque, leídas de izquierda a derecha, eliminan la información redundante en el sistema de implicaciones.

\begin{proposicion}\label{simpl_equiv}
	Sean $A,B,C,D\subseteq M$. Se verifican las siguientes equivalencias:
	\begin{enumerate}
		\item {\small$\{A\to B\}\equiv\{A\to B\smallsetminus A\}$}
		\item {\small$\footnotesize\{A\to B, A\to C\}\equiv\{A\to B\cup C\}$}
		\item {\small$A\cap B=\varnothing$ y $A\subseteq C$ implica $\footnotesize\{A\to B, C \to D\}\equiv  \{A\to B, C\smallsetminus B\to D\smallsetminus B\}$}
\end{enumerate}
%
%\begin{equation*}
%\begin{split}
%\{X\to Y,\ U \to V\}& \equiv  \{X\to Y, (U-Y)\to(V-Y)\}\\
%\end{split}
%\end{equation*}
\end{proposicion}

Gracias al Teorema de Deducción y las equivalencias anteriores, se puede pasar de las reglas de inferencia del sistema clásico de Armstrong a un sistema que puede ser automatizable. En este punto aparece el cierre \slfd, denominado {\tt Cls}\index{Cierre \slfd}, y que actúa según el siguiente procedimiento.

Dado un conjunto $A\subseteq M$ y un conjunto de implicaciones $\Sigma$, {\tt Cls} calcula el par $(A^+_\Sigma,\Gamma)$, siendo $A^+_\Sigma$ el cierre sintáctico de $A$ con respecto a $\Sigma$ y $\Gamma$ el conjunto residual de implicaciones respecto a $\varnothing \to A^+_\Sigma$. Esto permite determinar si una implicación $A \to B$ puede deducirse de $\Sigma$.

Los pasos del algoritmo desglosados en lenguaje natural y de forma más detallada son:
\begin{enumerate}
 \item En primer lugar, se incluye la fórmula $\varnothing \to A$ en $\Sigma$ y se usa como semilla por el método de razonamiento mediante las equivalencias mencionadas en la proposición anterior.
 \item A continuación, el algoritmo entra en un proceso iterativo en el cual se irán aplicando las siguientes equivalencias mientras no se alcance la condición de parada.
	\begin{itemize}
		\item {\bf Eq. I}: Si $B\subseteq A$ entonces $\{\emptyset\to A,B\to C\} \equiv \{\emptyset\to A\cup C\}$.
		\item {\bf Eq. II}: Si $C\subseteq A$ entonces $\{\emptyset\to A,B\to C\} \equiv \{\emptyset\to A\}$.
		\item {\bf Eq. III}: En otro caso  $\{\emptyset\to A,B\to C\} \equiv \{\emptyset\to A,B\smallsetminus A\to C\smallsetminus A\}$.
	\end{itemize} 
 \item En el momento en el que no sea posible aplicar ninguna de las equivalencias anteriores, el algoritmo termina dando como resultado el conjunto cierre $A^+_\Sigma$, es decir, el cierre sintáctico de $A$ con respecto a $\Sigma$, y además, el conjunto residual de implicaciones $\Gamma$.
\end{enumerate}

Formalmente, el algoritmo {\tt Cls} puede verse en la Función \ref{algoritmo:Cls}.
\begin{function}[h]
\caption{Cls($A$,$\Sigma$) }\label{algoritmo:Cls}
\small
\DontPrintSemicolon
\SetKwInOut{Input}{input}
\SetKwInOut{Output}{output}
\Input{$A$, conjunto de atributos sobre los que se quiere calcular el cierre; \\
$\Sigma$, un sistema de implicaciones;}
\Output{$A^+_\Sigma$, cierre sintáctico de $A$ con respecto a $\Sigma$; \\ 
$\Gamma$, el sistema de implicaciones residual;}
 
 
%    \Begin{

\Repeat{$\Gamma=\Sigma$}{
$\Gamma:=\Sigma$

$\Sigma:=\varnothing$


\ForEach{$B\to C\in \Gamma$}{
\lIf{$B\subseteq A$}{

\ \ \ \ {$A:=A\cup B$}
}
\lElseIf{$C\not\subseteq A$}{

\ \ \ \ {$\Sigma:=\Sigma\cup\{B\smallsetminus A\to C\smallsetminus A\}$}
}
}
}
 
     \Return $(A,\Gamma)$   
 
%   }%end begin
\end{function}


Aunque es cierto que existen en la literatura numerosas propuestas de algoritmos para calcular el cierre (la mayoría de ellas como modificaciones del cierre clásico de Maier \cite{Maier83}), la principal novedad y ventaja que aporta {\tt Cls} es que, aparte del cálculo del cierre, y de manera simultánea, también se calcula el conjunto reducido de implicaciones, guardando de esta forma el conocimiento complementario que describe la información que no pertenece al cierre. Este hecho conduce sin lugar a dudas a una posición privilegiada, ya que evita el elevado coste de minería de datos para extraer el nuevo conjunto de implicaciones para el conjunto de datos reducido después de cada aplicación del método, algo imprescindible con las implementaciones clásicas. En consecuencia, el proceso supera los costos de minería de datos preservando una complejidad lineal a lo largo del proceso.

Para finalizar este apartado, se muestra un ejemplo básico de aplicación del algoritmo del cierre \slfde propuesto.

\begin{ejemplo}
\label{ejemplo:basico} 
	Sean $\Sigma=\{a\to c, bc\to d, c\to ae, d\to e\}$ y $A=\{c,e\}$. El algoritmo {\tt Cls} devuelve $A^+=\{a,c,e\}$. La siguiente tabla muestra la traza de ejecución paso a paso del algoritmo. 

%{\small
$$\begin{array}{l||lllll}
\hline
Guide &  & \multicolumn{4}{c}{\Sigma } \\
%\hline
\emptyset\to ce &  & a\to c \quad& bc\to d \quad& c\to ae\quad& d\to e \quad\\
\hline
\hline
\emptyset\to ce &   & a\to \!\!\not\! c & b\!\!\not\! c\to d & \!\!\not\! c\to a\!\!\not\! e& d\to \!\!\not\! e \\
\emptyset\to ace &   &  & b\to d & & \\
%\emptyset\to acef &   &  & b\to d &  & \\
\hline
\end{array}
$$
%}%end small

Una vez finalizado la ejecución del algoritmo, se obtiene: ${\tt Cls}(\{c,e\},\{a\to c, bc\to d, c\to ae, d\to e\})=(\{a,c,e\},\{b\to d\})$, donde el cierre es $\{c,e\}^+_\Sigma = \{a,c,e\}$  y el conjunto residual de implicaciones queda como:  $\Gamma = \{b \to d\}$.
\end{ejemplo}



\section{Verificación de los Resultados}
\label{sec:verificacionResultados}
Antes de finalizar esta sección y entrar plenamente en el cuerpo de la tesis donde se van a presentar las publicaciones que han resultado de este trabajo de investigación, es necesario hacer una importante aclaración previa con la intención de indicar la manera de certificar la validez de los resultados obtenidos a lo largo de la tesis. 

Como se ha mostrado en los capítulos anteriores, la labor de investigación se ha centrado en actuar sobre conjuntos de implicaciones, y en ese sentido, para los experimentos realizados se ha contado con unos ficheros de entrada que contenían la información necesaria, y sobre ellos se han obtenido unos resultados. Ahora bien, la forma de verificar que esos resultados son correctos es la siguiente. 

En primer lugar y con respecto a los resultados que se presentan en cuanto a claves y generadores minimales, se han realizado numerosos ejercicios en papel intentando buscar casos límites donde la implementación pudiera no ser precisa y se ha comprobado que los resultados obtenidos en papel coincidían exactamente con los calculados por la máquina. Además, dado que para muchos de los experimentos, en los que se llegaban a calcular millones de nodos de un árbol, no era posible comprobar si cada uno de esos cálculos era correcto, para el caso concreto de los experimentos relacionados con claves minimales, la validez de los experimentos viene dada al haber cotejado los resultados con aquellos obtenidos sobre un amplio abanico de experimentos en trabajos anteriores \cite{Benito-Picazo2013PFC,Benito-Picazo2014TFM} donde su validez quedó demostrada. Básicamente, la validez de los ejercicios más grandes se ha extrapolado de los resultados correctos obtenidos para los ejercicios más pequeños. Pero además, la validez de los resultados se corrobora igualmente al alcanzar las mismas soluciones para diferentes métodos cuando cada uno de ellos hace un tratamiento de la información diferente con respecto al otro. En relación a los experimentos con SR conversacionales, dado que los experimentos no alcanzan números tan costosos de verificar, la validez de los resultados puede demostrarse de forma más asequible siguiendo un desarrollo explícito en papel.

Adicionalmente, y con mayor énfasis en relación a los experimentos que han conllevado la utilización de recursos de supercomputación, cada uno de los experimentos se ha reproducido entre 30 y 50 veces de forma que los resultados mostrados son fruto de un estudio estadístico posterior más amplio que permite identificar los resultados más fiables, tal y como se sugiere en trabajos anteriores \cite{Zobel1998,Goh10,Yang2012}.  


% =====================================================================
% =====================================================================
% =====================================================================