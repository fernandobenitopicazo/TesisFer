\pagestyle{empty}
\chapter{Preliminares}\label{cap:preliminares}
\pagestyle{headings}
\setlength{\epigraphwidth}{7cm}
\epigraph{\textit{Todo encajaba, con la abrumadora evidencia de una demostración matemática.
}{\\\textit{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Ethan de Athos}\\\textup{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ L. M. Bujold}}
}

\bigdrop{0pt}{5}{cmr10}A lo largo de este capítulo se van a introducir los principales conceptos, definiciones y resultados sobre los que se sustentan el trabajo de investigación desarrollado. Se parte una vez más de que el objetivo principal de la tesis doctoral es la utilización de los conjuntos de implicaciones\index{conjunto de implicaciones} para generar soluciones a problemas en el ámbito de FCA, bases de datos y sistemas de recomendación. Se ha diseñado este capítulo con la intención de que el texto sea autocontenido en la medida de lo posible y para ello se ha dividido en cuatro secciones principales tal como muestra la Figura \ref{figura:esquemaPreliminares}. 

La primera sección presenta las nociones de FCA que serán necesarias para las soluciones propuestas para generadores minimales\index{generadores minimales} y sistemas de recomendación\index{sistemas de recomendación}. En la segunda, se recopilan los aspectos fundamentales a tener en cuenta para la enumeración de las claves minimales\index{clave!claves minimales} en esquemas relacionales por medio de DFs. La tercera parte se dedica a presentar formalmente las lógicas de implicaciones\index{implicaciones}. La cuarta y última, se centra en el razonamiento automático usando dichas lógicas.

\begin{figure}[htbp]
		\begin{center}
			\includegraphics[height=.15\textheight,width=.75\textwidth]{esquemaPreliminares.png}
		\end{center}
		\caption{Esquema de contenido del Capítulo \ref{cap:preliminares}, Preliminares.}
		\label{figura:esquemaPreliminares}
\end{figure}


\section{Análisis Formal de Conceptos}
\label{sec:analisisFormalConceptos}
\noindent
De forma general, se puede considerar FCA como un marco para el análisis de información que facilita la extracción de conocimiento y la posibilidad de poder razonar sobre él. La referencia principal de este campo de conocimiento viene de la mano de Wille y Ganter en \cite{Ganter1997}. Según el propio Wille en \cite{Wille2005}: \textit{``El objetivo y significado del análisis formal de conceptos como teoría matemática consiste en apoyar la comunicación racional de las personas, mediante el desarrollo de estructuras de conceptos matemáticamente apropiadas que puedan activarse lógicamente''}.

Como principales fortalezas de FCA cabe mencionar: su sólida base matemática y filosófica, una representación gráfica e intuitiva del conocimiento, avalada en más de 2.000 publicaciones científicas, y aplicaciones en cientos de proyectos \cite{Wille2005} en diversos campos de conocimiento, como se ha mencionado en el Capítulo \ref{cap:introduccion}. 


\subsection{Contextos Formales}
\label{subsec:contextosFormales}
\noindent
El punto de partida de FCA es un \textit{contexto formal}\index{contexto formal}. Es una noción fundamental para el contenido de esta sección y se define a continuación.

\begin{definicion}[Contexto formal]
	Un contexto formal es una tripleta $K = (G,M,I)$ que consiste en dos conjuntos no vacíos, $G$ y $M$, y una relación binaria $I$ entre ellos. Los elementos de $G$ se llaman objetos del contexto, y los elementos de $M$ se llaman atributos del contexto. Para $g \in G$ y $m \in M$, escribimos $<g,m> \in I$ o $gIm$ si el objeto $g$ posee el atributo $m$.
\end{definicion}

La forma más sencilla de representar un contexto formal es mediante una tabla donde los objetos se sitúan en sus filas y los atributos en las columnas, de forma que un valor en cada celda indica si un objeto $g \in G$ posee un atributo $m \in M$. Hay que tener en cuenta que la definición de contexto formal es deliberadamente muy general. No hay restricciones sobre la naturaleza de los objetos y atributos. Se pueden considerar objetos físicos, personas, números, procesos, estructuras, etc. En realidad, cualquier cosa que sea un \textit{conjunto} en el sentido matemático se puede tomar como el conjunto de objetos o de atributos de algún contexto formal. También es posible intercambiar el papel de los objetos y atributos, es decir, si se tiene que $K = (G,M,I)$ es un contexto formal, igualmente lo será su dual, $K = (M,G,I')$ con $mI'g \Longleftrightarrow gIm$. Además, ni siquiera es necesario que $G$ y $M$ sean disjuntos, de hecho, pueden incluso no ser diferentes.

%\begin{ejemplo}
%	Se considera un ejemplo de contexto formal en el cual los objetos son hoteles, los atributos son diferentes servicios que ofrece el establecimiento y cada celda de la tabla indica si un objeto cumple un atributo. Por tanto, se tiene el contexto formal $\mathbf{K} = (G,M,I)$ en el cual:
%
%	G = \{Fuerte Estepona Suites, Hotel Buenavista, Hotel Paraíso, Apts Marriot Playa, Hotel Piedra Paloma, Hostal Hospedería V Cent\}
%
%	M = \{AC, Bar, Gimnasio, Internet, Masajes, Aparcamiento\}
%
%	La Tabla \ref{table:hotelsExtract} muestra la relación binaria $I$ utilizando información real de varios hoteles de la Costa del Sol.
%
%\begin{table*}[tb]
%\caption{Ejemplo de contexto formal utilizando datos reales del sector hotelero}
%\label{table:hotelsExtract} 
%\centering
%{\scriptsize
%\begin{tabular}{lccccccccc}
%\hline
% & AC & Bar & Gimnasio & Internet & Masajes & Aparcamiento\\
%\hline
%Fuerte Estepona Suites & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark\\
%Hotel Buenavista &  & \checkmark &  &  &  & \checkmark \\
%Hotel Paraíso & \checkmark & \checkmark &  &  &  & \checkmark \\
%Apts Marriot Playa &  &  &  & \checkmark &  &  \\
%Hotel Piedra Paloma &  & \checkmark &  &  &  & \checkmark \\
%Hostal Hospedería V Cent & \checkmark & \checkmark &  & \checkmark &  & \checkmark \\
%\hline
%\end{tabular}
%}
%\end{table*}
%
%	%Por tanto, se puede apreciar como el hotel \textit{Fuerte Estepona Suites} ofrece todos los servicios disponibles en el contexto, mientras que los \textit{Apts Marriot Playa} únicamente ofrecen el servicio de \textit{Internet}.
%\end{ejemplo}

Para ilustrar un ejemplo de contexto formal\index{contexto formal} y como apoyo al contenido que se presenta en esta sección, se va a utilizar el siguiente ejemplo tomado de \cite{Ganter2002}. En él, los autores muestran un información sobre los destinos aéreos que oferta un grupo de aerolíneas comerciales.

\begin{ejemplo}
\label{ejemploContextoFormal}
	Sea $K$ un contexto formal donde el conjunto de objetos $G$ comprende todas las líneas aéreas del grupo Star Alliance y el conjunto de atributos $M$ muestra sus destinos.
	
	La relación binaria $I$ viene reflejada en la Tabla \ref{tabla:ejemploContextoFormal} y muestra los destinos a los que viaja cada miembro de Star Alliance. Por tanto, se tiene el contexto formal $K = (G,M,I)$ en el cual:

	G = \{Air Canada, Air New Zealand, All Nippon Airways, Ansett Australia, The Austrian Airlines Group, British Midland, Lufthansa, Mexicana, Scandinavian Airlines, Singapore Airlines, Thai Airways International, Unites Airlines, VARIG\}

	M = \{Latinoamérica, Europa, Canadá, Asia, Oriente Medio, África, México, Caribe, Estados Unidos\}

\begin{table*}[tb]
\caption{Ejemplo de contexto formal sobre los destinos aéreos del grupo Star Alliance \cite{Ganter2002}}
\label{tabla:ejemploContextoFormal} 
\centering
{\scriptsize
\begin{tabular}{lccccccccc}
\hline
 & \rotatebox{90}{Latinoamérica} & \rotatebox{90}{Europa} & \rotatebox{90}{Canadá} & \rotatebox{90}{Asia} & \rotatebox{90}{Oriente Medio} & \rotatebox{90}{África} & \rotatebox{90}{México} & \rotatebox{90}{Caribe} & \rotatebox{90}{Estados Unidos\ }\\
\hline
Air Canada & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark &  & \checkmark & \checkmark & \checkmark\\
Air New Zealand &  & \checkmark &   & \checkmark  & & & & & \checkmark \\
All Nippon Airways &  & \checkmark &   & \checkmark  & & & & & \checkmark \\
Ansett Australia  &  &  &   & \checkmark  & & & & & \\
The Austrian Airlines Group &  & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark &  &  & \checkmark\\
British Midland &  & \checkmark &  &  &  &  &  &  & \\
Lufthansa & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark &  & \checkmark\\
Mexicana & \checkmark &  & \checkmark &  &  &  & \checkmark & \checkmark & \checkmark\\
Scandinavian Airlines & \checkmark & \checkmark &  & \checkmark &  & \checkmark &  &  & \checkmark\\
Singapore Airlines &  & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark &  &  & \checkmark\\
Thai Airways International & \checkmark & \checkmark &  & \checkmark &  &  &  & \checkmark & \checkmark\\
Unites Airlines & \checkmark & \checkmark & \checkmark & \checkmark &  &  & \checkmark & \checkmark & \checkmark\\
VARIG & \checkmark & \checkmark &  & \checkmark &  & \checkmark & \checkmark &  & \checkmark\\
\hline
\end{tabular}
}
\end{table*}
\end{ejemplo}


\subsection{Operadores de Derivación}
\label{subsec:operadoresDerivacion}
\noindent
Dada una selección $A \subseteq G$ de objetos de un contexto formal\index{contexto formal} $K = (G,M,I)$, se desea caracterizar qué atributos de $M$ son comunes a todos estos objetos. Esto define un operador que produce para cada conjunto de objetos $A \subseteq G$, el conjunto $A$ de sus atributos comunes, y dualmente, a partir de un conjunto de atributos, caracterizar el conjunto de atributos que tienen en común a dichos atributos. Estos operadores se denominan operadores de derivación\index{operadores de derivación} para $K$.
 
\begin{definicion}[Operadores de derivación]
	Dado un contexto formal $K = (G,M,I)$, se definen los operadores de derivación:

$$
\begin{array}{ll}
(\ )'\colon 2^G  \to 2^M
&
(\ )'\colon 2^M  \to 2^G
\\[2mm]
A' = \{m \in M \mid g\I m  \quad \forall g \in A\}\qquad
&
B' = \{g \in G \mid g\I m  \quad \forall m \in B\}
\end{array}
$$
\end{definicion}

Ambas funciones se denotan con el mismo símbolo porque no hay lugar a confusión.

\begin{ejemplo}
	A partir del contexto formal representado en la Tabla \ref{tabla:ejemploContextoFormal} se pueden aplicar los operadores de derivación y obtener, por ejemplo:
	
	\begin{itemize}
		\item $\{Mexicana\}' = \{Latinoamerica,\ Canada,\ Mexico,\ Caribe,\ Estados$
	
	$\ Unidos\}$
		%\item $\{British\  Midland\}' = \{Europa\}$
		\item $\{Latinoamerica,\ Europa,\ Asia,\ Africa,\ Estados\ Unidos\}' = $
	
	$\{Scandinavian\ Airlines,\ Lufthansa,\ VARIG\}$
		%\item $\{Asia\}' = \{Ansett\ Australia\}$
	\end{itemize}
\end{ejemplo}

Si $A$ es un conjunto de objetos, entonces $A'$ es un conjunto de atributos, al cual podemos aplicar el segundo operador de derivación para obtener el conjunto de objetos $A''$. De forma dual, comenzando con un conjunto $B$ de atributos, podemos formar el conjunto de atributos $B''$.

De la definición anterior se obtiene que:

%\begin{proposicion}
%	Sean los subconjuntos $A, A_1, A_2 \subseteq G$, se tiene que:
%	\begin{enumerate}
%		\item $A_1 \subseteq A_2 \Rightarrow A^{'}_2 \subseteq A^{'}_1$
%		\item $A \subseteq A''$
%		\item $A = A''''$
%	\end{enumerate}
%\end{proposicion}

El operador de cierre $''$ (i.e. aplicar el operador de derivación $'$ y su dual) verifica algunas propiedades interesantes que serán fundamentales para poder desarrollar la teoría formal.

\begin{definicion}[Operador de cierre]\index{operador de cierre}
	Sea $K\ =\ (G,M,I)$ un contexto formal, entonces el operador $()'' : 2^M \to 2^M$ es un operador de cierre, es decir, satisface las siguientes propiedades:
	\begin{itemize}
		\item Idempotente: $X'''' = X'' \quad \forall X \in 2^M$
		\item Monótona: $X \subseteq Y$ $\rightarrow$ $X'' \subseteq Y'' \quad \forall X,Y \in 2^M$ 
		\item Extensiva: $X \subseteq X'' \quad \forall X \in 2^M$
	\end{itemize}
	
Por dualidad, el resultado es igualmente válido para $()'' : 2^G \to 2^G$.
\end{definicion}

Un conjunto $A \subseteq M$ se denomina \textit{conjunto cerrado} para el operador $''$ si es un punto fijo para $''$, es decir, $A''=A$. Los conjuntos cerrados permiten definir lo que se denominan \textit{conceptos formales}\index{concepto formal}, los cuales son una noción esencial en FCA y a los que se dedica el siguiente apartado. 

\begin{ejemplo}
	A partir del contexto formal representado en la Tabla \ref{tabla:ejemploContextoFormal} se puede obtener el conjunto cerrado de atributos: 
	
	\textit{Z = \{Latinoamerica, Europa, Canada, Asia, Oriente Medio, Africa, Mexico, Estados Unidos\}.}
	
	Ya que $Z'' = Z.$
\end{ejemplo}


\subsection{Conceptos Formales}
\label{subsec:conceptosFormales}
\noindent
De forma general, un concepto formal permite describir formalmente un hecho del contexto y caracterizar un conjunto de objetos por medio de los atributos que comparten y viceversa. 

Así, un par $(X,Y)$ con $X\subseteq G$ y $Y\subseteq M$ es un concepto formal cuando se verifica que:
\begin{itemize}
	\item Cada objeto en $X$ tiene todos los atributos de $Y$, y dualmente, cada atributo de $Y$ está presente en cada objeto de $X$.
	\item Para cada objeto en $G$ que no está en $X$, existe un atributo en $Y$ que el objeto no tiene. Dualmente, para cada atributo en $M$ que no está en $Y$, hay un objeto en $X$ que no tiene ese atributo.
\end{itemize}

Se introduce ahora la noción formalmente:

\begin{definicion}[Concepto formal]
	Sea $K = (G,M,I)$ un contexto formal\index{contexto formal} y $A \subseteq G$, $B \subseteq M$. El par (A, B) se denomina concepto formal si $A'=B$ y $B'=A$. El conjunto de objetos $A$ se denomina extensión del concepto (A, B) mientras que el conjunto de atributos $B$ será la intensión del concepto.
\end{definicion}

La descripción de un concepto a través de su extensión e intensión es redundante, ya que cada una de las dos partes determina la otra debido a que $B\ =\ A'$ y $A\ =\ B'$, sin embargo, pueden existir ocasiones en las cuales esta descripción redundante puede ser conveniente \cite{Ganter2002}.

Una alternativa gráfica de identificar los conceptos formales es la siguiente. A partir de la representación del contexto formal, un concepto formal se puede reconocer por medio de un conjunto de elementos que comparten exactamente las mismas relaciones. De esta forma, en la Tabla \ref{tabla:extractoEjemploContextoFormal}, se ve como, a partir del contexto formal, es posible identificar el concepto formal: \textit{\{Air New Zealand, All Nippon Airways\},\{Europa, Asia, Estados Unidos\}}.

%\begin{table*}[tb]
%\caption{Conceptos formales a partir de la representación del contexto formal.}
%\label{table:conceptosFormales} 
%\centering
%{\scriptsize
%\begin{tabular}{lcccccc}
%\hline
%Modelo de coche & Consumo & Cilindrada & Movilidad & Potencia & Peso & Aceleración\\
%\hline
%Chevrolet Vega &  &  &  & \checkmark &  & \checkmark\\
%Toyota Corolla &  &  &  & \checkmark &  & \\
%Ford Pinto &  &  & \checkmark &  & \checkmark & \\
%Volkswagen Beetle & \checkmark &  & \checkmark & \checkmark & \checkmark & \checkmark \\
%Plymouth Satellite  & \cellcolor{gray!25}\checkmark & \cellcolor{gray!25}\checkmark & \cellcolor{gray!25}\checkmark &  &  & \cellcolor{gray!25}\checkmark \\
%Chevrolet Malibu & \cellcolor{gray!25}\checkmark & \cellcolor{gray!25}\checkmark & \cellcolor{gray!25}\checkmark &  &  & \cellcolor{gray!25}\checkmark \\
%\hline
%\end{tabular}
%}
%\end{table*}

\begin{table*}[htb]
\caption{Extracto del ejemplo de contexto formal sobre los destinos aéreos del grupo Star Alliance \ref{tabla:ejemploContextoFormal}}
\label{tabla:extractoEjemploContextoFormal} 
\centering
{\scriptsize
\begin{tabular}{lccccccccc}
\hline
 & \rotatebox{90}{Latinoamérica} & \rotatebox{90}{Europa} & \rotatebox{90}{Canadá} & \rotatebox{90}{Asia} & \rotatebox{90}{Oriente Medio} & \rotatebox{90}{África} & \rotatebox{90}{México} & \rotatebox{90}{Caribe} & \rotatebox{90}{Estados Unidos\ }\\
\hline
$\left [ \ldots \right ]$ &  &  &  &  &  &  &  &  & \\
\cellcolor{gray!25}Air New Zealand &  & \cellcolor{gray!25}\checkmark &   & \cellcolor{gray!25}\checkmark  & & & & & \cellcolor{gray!25}\checkmark \\
\cellcolor{gray!25}All Nippon Airways &  & \cellcolor{gray!25}\checkmark &   & \cellcolor{gray!25}\checkmark  & & & & & \cellcolor{gray!25}\checkmark \\
$\left [ \ldots \right ]$  &  &  &  &  &  &  &  &  & \\
\hline
\end{tabular}
}
\end{table*}


\subsection{Retículo de Conceptos}
\label{subsec:reticuloConceptos}
\noindent
Un contexto formal\index{contexto formal} puede tener muchos conceptos formales. El conjunto de todos los conceptos formales de un contexto formal $K$ tiene estructura de \textit{retículo} con la relación de orden que se muestra a continuación.

Si $(X_1,Y_1)$ y $(X_2,Y_2)$ son conceptos, se define un orden parcial, $\leq$, de forma que $(X_1,Y_1) \leq (X_2,Y_2)$ si y sólo si $X_1 \subseteq X_2$, o equivalentemente, si $Y_2 \subseteq Y_1$.

%Los pares de conceptos en este orden parcial tienen una única máxima cota inferior, que es el concepto generado por $X_1 \cap X_2$. De forma análoga, poseen una única mínima cota superior, el concepto generado por los atributos $Y_1 \cap Y_2$. Por medio de estas operaciones de cálculo del máximo y del mínimo de dos conceptos, se satisfacen las propiedades que definen un retículo. 

La Figura \ref{figura:ejemploReticuloAerolineas} muestra el retículo de conceptos\index{retículo de conceptos} asociado al contexto formal mostrado anteriormente en el Ejemplo \ref{ejemploContextoFormal}. En un diagrama como el de la Figura \ref{figura:ejemploReticuloAerolineas}, cada nodo representa un concepto formal. Un concepto $c_1$ es un subconcepto de un concepto $c_2$ si y solo si hay un camino de  descendente desde el nodo que representa $c_2$ al nodo que representa $c_1$. El nombre de un objeto $g$ se asocia al nodo que representa el concepto más pequeño que contiene $g$ en su extensión; dualmente, el nombre de un atributo $m$ va asociado al nodo que representa el concepto más grande con $m$ en su intensión.

Se pueden comprobar fácilmente las relaciones que existen en el contexto ya que un objeto $g$ tiene un atributo $m$ si y sólo si el concepto asociado a $g$ es un \textit{subconcepto} del asociado a $m$. La extensión de un concepto consiste en todos aquellos objetos cuyas etiquetas están asociadas a subconceptos, y, dualmente, la intensión consiste en todos los atributos asociados a \textit{superconceptos}. 

\begin{figure}[!htbp]
		\begin{center}
			\includegraphics[height=.5\textheight,width=1.1\textwidth]{ejemploReticuloAerolineas.png}
		\end{center}
		\caption{Retículo de conceptos\index{retículo de conceptos} asociado al contexto formal \ref{ejemploContextoFormal}}
		\label{figura:ejemploReticuloAerolineas}
\end{figure}

Dicho lo anterior y teniendo en cuenta la sobrecarga que conllevaría representar cada concepto del retículo en la Figura \ref{figura:ejemploReticuloAerolineas}, se puede mencionar aquí como ejemplo, el concepto etiquetado como `Oriente' \textit{(Oriente Medio)}, el cual tiene como extensión el conjunto \{\textit{Singapore Airlines, The Austrian Airlines Group, Lufthansa, Air Canada}\}, y como intensión \{\textit{Oriente Medio, Canadá, Estados Unidos, Europa, Asia}\}.

En la parte superior del retículo, encontramos los destinos que ofrecen la mayoría de las aerolíneas: Europa, Asia Pacífico y los Estados Unidos. Por ejemplo, exceptuando British Midland y Ansett Australia, todas las aerolíneas ofrecen vuelos a Estados Unidos. Esas dos líneas aéreas se encuentran en la parte superior del diagrama, ya que tienen la menor oferta de vuelos, operan sólo en Europa y Asia, respectivamente. 

De esta forma, cuanto más se descienda en el retículo de conceptos, más destinos ofrecerán las aerolíneas. Así, la mayor oferta de destinos se encuentra en las aerolíneas de la parte inferior del retículo: Lufthansa y Air Canada. De forma análoga, conforme más se descienda en el retículo, se encontarán los destinos menos ofertados, e.g. África, Oriente Medio y el Caribe.



\subsection{Sistema de Implicaciones}
\label{subsec:sistemaImplicaciones}
\noindent
Una noción equivalente al retículo de conceptos es el denominado sistema de implicaciones \cite{Ganter1997}. Como ya se adelantó en el Capítulo \ref{cap:introduccion}, las implicaciones\index{implicaciones} constituyen el eje fundamental de trabajo en esta tesis doctoral. 

%Muestran una alternativa sencilla de representar las relaciones lógicas que se encuentran entre los atributos que poseen los objetos del contexto formal ya que combinan una forma muy simple y natural de escribir reglas del tipo \textit{si-entonces}\index{if-then rules}.% con una gestión automatizada de la información.

Para introducir la labor realizada utilizando la lógica sobre los conjuntos de implicaciones, se va a comenzar describiendo los componentes habituales de una lógica: su lenguaje, semántica, sistema axiomático y método de razonamiento automático. No obstante, como se ha comentado anteriormente, los conjuntos de implicaciones se han utilizado para diferentes campos de conocimiento (FCA, bases de datos). En consecuencia, en este punto se presenta el elemento de la lógica común a todos ellos, en concreto, el lenguaje. El resto se presentará para cada una de las secciones correspondientes \ref{sec:basesDatosRelacionales} y \ref{sec:logicaSimplificacion}.

\subsection*{Lenguaje}
\noindent
\begin{definicion}
	\label{def:lenguaje}
	Dado un conjunto $M$ finito de símbolos (denominados atributos) no vacío, el lenguaje sobre $M$ se define como: 
$$
\mathcal L_M = \{A\to B\mid A,B\subseteq M\}
$$
\end{definicion}

Las fórmulas $A \to B$ se denominan \emph{implicaciones}\index{implicaciones} y los conjuntos $A$ y $B$ reciben el nombre de \emph{premisa} y \emph{conclusión} de la implicación respectivamente. Los conjuntos $\sum \subseteq \mathcal L_M$ se denominan \emph{conjuntos de implicaciones} sobre $M$.

Se utilizará la siguiente notación:
\begin{itemize}
	\item Se utilizarán letras minúsculas para denotar los elementos en $M$, mientras que las mayúsculas denotan sus subconjuntos.
	\item Se omiten las llaves en premisas y conclusiones, es decir, $abcde$ denota el conjunto $\{a,b,c,d,e\}$.
	\item Se escriben los elementos de $2^M$ por yuxtaposición, es decir, para $X \cup Y$ se escribirá $XY$.
	\item Para la diferencia se utiliza $X \smallsetminus Y$.
\end{itemize}

%\begin{definicion}[Implicación]\index{Implicación}
%	Una implicación sobre un conjunto de atributos $M$ es una expresión de la forma $X \to Y$, donde $X$ e $Y$ son conjuntos de atributos, i.e. $X \subseteq M$ y $Y \subseteq M$.
%\end{definicion}

%\begin{definicion}[Implicación trivial]\index{Implicación!trivial}
%	Una implicación $X \to Y$ es trivial si $Y \subseteq X$.
%\end{definicion}
%
%\begin{definicion}[Implicación unitaria]\index{Implicación!unitaria}
%	Una implicación se dice unitaria si su conclusión es un conjunto unitario, i.e. $X \to a$.
%\end{definicion}


\subsection*{Semántica}
\noindent
Tras la definición del lenguaje se pasa ahora a introducir la semántica utilizada, para lo cual se va a utilizar la noción de \textit{operador de cierre}\index{operador de cierre} definido anteriormente.

%Un operador de cierre $c$ en $M$ recibe el nombre de \emph{modelo} para una implicación $A\to B\in\mathcal L_M$ si $B\subseteq  c(A)$; se denota $c\models A\to B$. Además, dado un sistema de implicaciones $\Sigma\subseteq \mathcal L_M$ y un operador de cierre $c$ en $M$, $c\models \Sigma$ denota que $c\models A\to B$ para todo $A\to B\in \Sigma$.

%Se dice que una implicación $X \to Y$ se cumple en un contexto formal $K$ si y sólo si cada objeto $A \in G$ que tiene todos los atributos de $X$ también tiene todos los atributos de $Y$.

%En definitiva, $\Sigma \models A\to B$ si cada modelo de $\Sigma$ es un modelo para $A\to B$, y $\Sigma_1 \equiv \Sigma_2$ si sus modelos representan el mismo conocimiento.

\begin{definicion}[Modelo]\index{Modelo}
\label{def:sintaxisFCA}
	Sea $K=(G,M,I)$ un contexto formal\index{contexto formal} y sea $A\to B \in \mathcal L_M$. El contexto K es un modelo para $A\to B$ si $B \subseteq A''$. Se denota por $K\models A\to B$.
\end{definicion}

La noción de modelo puede extenderse a los sistemas de implicaciones de la siguiente manera. Dado $\Sigma\subseteq \mathcal L_M$, la expresión $K\models \Sigma$ indica que $\Sigma \models A\to B$ para toda $A \to B \in \Sigma$.

\begin{ejemplo}
	De la información mostrada en el contexto formal del Ejemplo \ref{ejemploContextoFormal} se puede identificar que: $K \models Caribe \to Latinoamerica$. Y también que: $K \not\models Caribe \to Mexico$.
\end{ejemplo} 

%\begin{ejemplo}
%	Sea $M = \{a,b,c,d\}$ un conjunto de atributos. Se cumple que $\{a\to b, a\to c\} \equiv \{a\to bc\}$ porque para cada contexto formal $K = (G,M,I)$, se verifica que $\{b,c\}' = \{b\}' \cup \{c\}'$. Por tanto, $\{a\}' \subseteq \{b\}'$ y $\{a\}' \subseteq \{c\}'$ si y sólo si $\{a\}' \subseteq \{b,c\}'$.
%\end{ejemplo}

%\begin{proposicion}
%	Sea $M$ un conjunto de atributos y $\Sigma \subseteq \mathcal L_M$. Se verifica que:
%	\[
%		\Sigma \equiv \bigcup_{A\to B \in \Sigma} \{A \to b \mid b \in B\}
%	\]
%\end{proposicion}

%Un ejemplo básico de implicaciones puede verse utilizando nuevamente la información de la Tabla \ref{tabla:ejemploContextoFormal}. En ese ejemplo puede apreciarse una relación que siempre se cumple y es la siguiente. Si la aerolínea provee servicio de vuelo a \textit{Latinoamérica} entonces también ofrece como destino \textit{Estados Unidos}. He ahí un claro ejemplo de regla \textit{si-entonces} o implicación, que se verifica en el contexto.

%Las implicaciones se interpretan de forma conjuntiva, es decir, corresponden a las fórmulas $a_1\land \ldots\land a_n \to b_1\land \ldots\land b_m$ donde las proposiciones $a_1, \ldots  a_n,  b_1, \ldots, b_m$ son elementos del conjunto $M$.

%Por completitud, el conjunto de todas las implicaciones que se verifican en ese contexto es: 
%
%\noindent
%$\Sigma\ =\ \{$ 
%
%$Europa,\ Estados\  Unidos \rightarrow Asia$;
%
% $Asia,\  Estados\  Unidos \rightarrow Europa$; 
% 
% $Latinoamerica \rightarrow Estados\  Unidos$; 
% 
% $Canada \rightarrow Estados\  Unidos$; 
% 
% $Europa,\  Asia \rightarrow Estados\  Unidos$;  
% 
% $Africa \rightarrow Europa,\  Asia,\  Estados\  Unidos$; 
% 
% $Mexico \rightarrow Latinoamerica,\  Estados\  Unidos$; 
% 
% $Caribe \rightarrow Latinoamerica,\  Estados\  Unidos$; 
% 
% $Latinoamerica,\  Canada,\  Estados\  Unidos \rightarrow Mexico$; 
% 
% $Europa,\  Canada,\  Asia,\  Africa,\  Estados\  Unidos \rightarrow Oriente\  Medio$; 
% 
% $Oriente\  Medio \rightarrow Europa,\  Canada,\  Asia,\  Estados\  Unidos$;
% 
% $Latinoamerica,\  Mexico,\  Caribe,\  Estados\  Unidos \rightarrow Canada$
% 
%\noindent
% $\}$.

Al comenzar el capítulo se habló de la equivalencia entre la información que muestra el retículo de conceptos y las implicaciones; tras haber introducido formalmente el lenguaje y la semántica de las implicaciones, ahora ya se pueden mencionar algunos ejemplos que reflejen esta equivalencia utilizando la información del retículo de la Figura \ref{figura:ejemploReticuloAerolineas}. Así, es posible identificar ejemplos de implicaciones tales como:

\begin{itemize}
	\item $Canada \rightarrow Estados\  Unidos$, ya que se puede ver como el primer atributo aparece por primera vez en la jerarquía en un subconcepto del nodo que refleja la primera aparición del segundo. En otras palabras, todo objeto $g$ del contexto que tenga el atributo $Canada$ tendrá el atributo $Estados\  Unidos$.
	%\item $Oriente\  Medio \rightarrow Europa,\  Canada,\  Asia,\  Estados\  Unidos$. Ídem al anterior.
\end{itemize}

Se puede considerar a las implicaciones\index{implicaciones} y el retículo de conceptos\index{retículo de conceptos} como distintas alternativas para tratar la información que se puede extraer de un contexto formal\index{contexto formal}. No obstante, los retículos de conceptos permiten una representación gráfica, mientras que la diferencia fundamental, desde el punto de vista de esta tesis doctoral, es que los sistemas de implicaciones proporcionan una manipulación simbólica usando la lógica de implicaciones, y por tanto, permiten el razonamiento automático.

Como se ha mencionado anteriormente, se entra ahora en la segunda sección de este capítulo en la cual se van a utilizar las implicaciones en el ámbito de las bases de datos relacionales, donde recibirán el nombre de Dependencias Funcionales.



\section{Bases de Datos Relacionales}\index{Bases de Datos Relacionales}
\label{sec:basesDatosRelacionales}
\noindent
El modelo de base de datos relacional aparece en el reconocido artículo de Edgar Frank Codd en 1970 \cite{Codd1970}. Codd propuso que los sistemas de bases de datos deberían presentarse al usuario mediante una vista de datos organizada en forma de tablas bidimensionales (filas y columnas) que denominó \textit{relaciones}.% La tabla es una representación de la relación, pero en el modelo de Codd, lo que se introducen son las relaciones.

Formalmente, en el modelo relacional, una base de datos consiste en una o más relaciones \cite{Elmasri2010}. Una relación $R$ definida sobre un conjunto de dominios $D_1$, $D_2$, ..., $D_n$ está formada por un esquema y un cuerpo como se definen a continuación.

\begin{definicion}[Esquema]\index{Esquema}
	Un esquema $E$ para una relación $R$ se define como un conjunto fijo de pares \textit{(atributo:dominio)}. Habitualmente se denota como $\{(A_1:D_1),\ (A_2:D_2),\ (A_n:D_n)\}$ donde cada $A_j$ corresponde a un único $D_j$ y los $A_j$ son todos distintos.
\end{definicion}

En el Ejemplo \ref{ejemplo:basicoClaves}, el esquema sería: 

\noindent
\textit{\{}

\textit{Título:Cadena de caracteres, Año:Número natural, País:Cadena de caracteres, Director:Cadena de caracteres, Nacionalidad:Cadena de caracteres, Actor:Cadena de caracteres}

\noindent
\textit{\}}.

El conjunto de los esquemas para las relaciones de una base de datos se denomina \textit{esquema de base de datos relacional}.

\begin{definicion}[Cuerpo]\index{Cuerpo}
	Un cuerpo $C$ para una relación $R$ se define como un conjunto de tuplas de pares \textit{(atributo:valor)}. Habitualmente se denota como $\{(A_1:v_{i1}),\ (A_2:v_{i2}),\ (A_n:v_{in})\}$ con $i = 1,2,...,m$ tal que $m$ es el cardinal de $R$, i.e. el número de tuplas de la relación. En cada $(A_j:v_{ij})$ se tiene que $v_{ij} \in D_j$.
\end{definicion}

En el Ejemplo \ref{ejemplo:basicoClaves}, un extracto del cuerpo sería:

\noindent
\textit{\{}

	\textit{[(Título:Pulp Fiction), (Año:1994), (País:USA), (Director:Quentin Tarantino), (Nacionalidad:USA), (Actor:Uma Thurman)],}

 \textit{[(Título:King Kong), (Año:2005), (País:NZ), (Director:Peter Jackson), (Nacionalidad:NZ), (Actor:Naomi Watts)], }
 
 \textit{...}
 
\noindent
\textit{\}}.

Tras haber definido formalmente el cuerpo y el esquema de un relación, se puede mencionar que en los sistemas gestores de bases de datos relacionales, las relaciones se representan como una tabla de doble entrada, en la que (con un una terminología más informal) se encuentran los siguientes elementos:
\begin{itemize}
	\item \textbf{Atributo}. Cada una de las columnas de una relación se identifica con un atributo. %En el ejemplo \ref{tabla:ejemploPeliculas} los atributos son: Título, Año, País, Director, Nacionalidad, Actor.
	\item \textbf{Tupla}\index{tupla}. Se identifica cada tupla de una relación con una fila de la tabla, exceptuando la fila que contiene a los atributos.
	%\item \textbf{Dominio}\index{dominio}. Un dominio describe un conjunto de posibles valores para cierto atributo.
	%El modelo relacional requiere que cada componente de cada tupla sea atómico. No se permite que un valor de la tupla sea una estructura de datos (e.g. una lista, una matriz, un conjunto, etc.) cuyos valores puedan dividirse en componentes más pequeños. De esta forma, se establece que cada atributo de la relación está asociado a un dominio, i.e. un tipo particular de dato.
\end{itemize}

%Las relaciones son conjuntos de tuplas, no listas de tuplas y por tanto, el orden en que el se presenten las tuplas de una relación es irrelevante. De hecho, se puede incluso modificar el orden de aparición de los atributos y la relación se mantiene constante.



%Un diseño impreciso de un esquema de base de datos relacional puede generar ciertas anomalías que provoquen el mal funcionamiento del sistema. Una anomalía es una inconsistencia entre una parte de los datos y otra. Los principales tipos de anomalías aparecen a la hora de operar con el sistema en términos de actualizaciones, eliminaciones o inserción de información redundante \cite{Vavilis2015,Costante2017}.



\subsection{Dependencias Funcionales}
\label{subsec:dependenciasFuncionales}
\noindent
Un diseño defectuoso del esquema de base de datos relacional puede provocar lo que se denominan \textit{anomalías} \cite{Ullman1997,Kamra2008,Sallam2015}. Estas anomalías son problemas que aparecen a la hora de operar con la base de datos en términos de actualizaciones, eliminaciones o inserción de información redundante \cite{Costante2017,Vavilis2015}.

La manera de eliminar estas anomalías consiste en descomponer las relaciones \cite{Armstrong1980}. La descomposición de relaciones conduce al campo de la \textit{normalización} \cite{Codd1971} que si bien no forma parte del ámbito principal de esta tesis doctoral, permite dar paso a la introducción del concepto de DF, el cual nace como un recurso para caracterizar la semántica de las relaciones y, por consiguiente, permitir hacer una aplicación de las transformaciones de normalización \cite{Darwen2012}. Ésta es una de las diferencias del tratamiento de las relaciones entre FCA y bases de datos relacionales, ya que para el primero, lo que se pretende es capturar conocimiento, mientras que en el segundo, las DFs se utilizan para definir formas normales \cite{Armstrong1980,Fagin1981,Kent1983}.

%Existen muchas restricciones que el modelo relacional permite establecer en las relaciones de los esquemas de la base de datos. Concretamente, esta parte de la tesis está enfocada en las restricciones denominadas dependencias funcionales.

Teniendo en cuenta que la sintaxis que se va a utilizar para DFs es la misma que la ya introducida para las implicaciones en FCA en la Sección \ref{subsec:sistemaImplicaciones}, donde el conjunto $M$ lo forman los atributos del esquema de la relación, se pasa ahora a describir la semántica para las DFs.


\subsection*{Semántica}
\noindent
\begin{definicion}[Dependencia Funcional]\index{dependencias funcionales}
\label{def:sintaxisFD}
Una dependencia funcional $X \to Y$ se cumple en una tabla $R$ si y sólo si para cada dos tuplas\index{tupla} de $R$, si sus valores en $X$ coinciden, entonces también coinciden sus valores en $Y$. %Dicho de otro modo, si dos tuplas tienen los mismos valores para cada atributo de $X$, entonces tendrán los mismos valores para cada atributo de $Y$.
\end{definicion}

Intuitivamente, una DF $X \rightarrow Y$ indica que el conjunto de atributos $X$ determina el conjunto de atributos $Y$, lo cual refleja fielmente la noción de función (y de ahí su nombre) entre los dominios de $A$ y $B$, $f: A\to B$. Estas funciones son las que se usan para tratar las anomalías mencionadas anteriormente, buscando aquellas funciones que se correspondan con relaciones de forma unívoca. El siguiente ejemplo ilustra cómo la semántica de la DFs y las implicaciones\index{implicaciones} en FCA es diferente.

\begin{ejemplo}
Sea el contexto formal $K=(G,M,I)$ representado a continuación:
\begin{center}
	{\scriptsize
	\begin{tabular}{cccccc}
 		%\hline
  	& a & b & c \\
 		\hline
 		$g_1$ & 1 & 0 & 1\\
 		$g_2$ & 1 & 1 & 1\\
 		$g_3$ & 0 & 0 & 0\\
 		$g_4$ & 0 & 1 & 1\\
 		%\hline
	\end{tabular}
	}
\end{center}

Dado ese contexto formal, se puede ver que se verifica la implicación $a \to c$ en $K$, mientras que por otro lado, al considerar el contexto formal como una relación del modelo relacional y considerando la semántica de DF, no se cumple que $a \to c$ debido a los diferentes valores de $g_3$ y $g_4$ en el atributo $c$. 
\end{ejemplo}

La forma en que las DFs se asemejan a las implicaciones no viene dada porque se parezcan en su semántica sino por el hecho de que se pueden manejar utilizando la misma lógica, los axiomas de Armstrong \cite{Armstrong74}, que se presentarán más adelante en la Sección \ref{subsec:axiomasArmstrong}.

%Por otro lado, en la Sección \ref{subsec:sistemaImplicaciones} se dijo que una implicación se verifica en un contexto formal\index{contexto formal} $K$ si cada objeto del contexto que contenga los atributos de $X$ también tiene los de $Y$, sin embargo, en una DF, no sólo esos atributos tienen que aparecer en ambos conjuntos sino que además su \textit{valor} ha de ser el mismo.

La diferencia principal en la interpretación de las DFs y las implicaciones proviene de la estructura de los \textit{datasets}\index{dataset} considerados, que en el caso de FCA son binarios mientras que en el modelo relacional son multivaluados. La noción de implicaciones en FCA puede ampliarse para poder tratar con contextos formales donde la relación $I$ toma valores en un conjunto en lugar de ser binaria. Este tipo de contextos formales\index{contexto formal} se denominan multivaluados y su aproximación se realiza a través del llamado análisis de conceptos formales difusos \cite{Burusco1998,Belohlavek2000}, lo que queda fuera del ámbito de esta tesis doctoral.

%Esta es una diferencia esencial que surge al comparar la semántica implicación en FCA con DF, ya que en contextos formales se trata con una relación binaria $I$ entre los objetos y los atributos del contexto, mientras que en esquemas relacionales, los atributos pueden ser valores \textit{multivaluados} y por tanto, para que una DF se cumpla, han de coincidir los valores de la relación.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%La noción de FD es de gran importancia en la tesis debido a que es la base para el trabajo realizado sobre el problema de la enumeración de todas las claves minimales de esquemas relacionales.
%
%A continuación, introducimos algunas definiciones usadas más adelante para abordar dicho problema.
%
%Una clave en bases de datos relacionales está constituida por un subconjunto de los atributos del esquema de una tabla tal que los valores de esos atributos identifican unívocamente a cada tupla de la tabla. Se puede definir por medio de FDs de la siguiente forma:
%
%\begin{definicion}[Clave]\index{clave}
%	Dada una relación $R$ sobre el conjunto de atributos $M$, se dice que $K \subseteq M$ es una clave de $R$ si la FD $K \rightarrow M$ se verifica en $R$.
%\end{definicion}
%
%\begin{definicion}[Clave Minimal]\index{clave!claves minimales}
%	Dada una relación $R$, el conjunto de atributos $K \subseteq M$ se dice que es una clave minimal si $K$ es clave y para todo atributo $k \in K$ el subconjunto $K - \{k\}$ no es clave de $R$.
%\end{definicion}
%
%\begin{definicion}[Superclave]
%	El conjunto de atributos $K \subseteq M$ se dice que es una superclave de $R$ si $K$ es una clave de $R$ y no es minimal.
%\end{definicion}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%Finalmente, a través de las FDs que se verifican en una relación $R$ y por medio de la lógica que se introduce a continuación, se ha realizado un amplio estudio de los métodos de enumeración de claves basados en el paradigma de tableaux\index{Tableaux} \cite{Morgan1992,Risch1992} y el diseño de nuevos métodos que mejoran a los existentes en la literatura. El trabajo ha conllevado además una exhaustiva labor en cuanto a experimentos y pruebas para verificar las mejoras alcanzadas. Debido a los requerimientos que alcanza el problema de la enumeración de claves cuando la información de entrada es considerable, la mayor parte de estos experimentos ha supuesto utilizar el paralelismo\index{paralelismo} en las implementaciones y recursos de supercomputación\index{supercomputación} como se puede comprobar en algunas de las publicaciones que avalan esta tesis \cite{Benito-Picazo2014,Benito-Picazo2016}.   



\section{Lógica de Implicaciones}
\label{sec:logicaSimplificacion}
\noindent
En esta sección se van a introducir las lógicas de implicaciones que permitirán disponer de sistemas axiomáticos correctos y completos para trabajar con ellas. Para ello, el punto de partida van a ser los axiomas de Armstrong \cite{Armstrong74} como pionero en el campo. Sin embargo, el sistema de Armstrong no es adecuado para el razonamiento automático debido a su fuerte dependencia a la transitividad. En consecuencia, tras los Axiomas de Armstrong se presenta la lógica \slfd, la cual sí va a permitir desarrollar métodos de razonamiento automático.

Ambas lógicas pueden aplicarse con éxito para trabajar con implicaciones y con DFs. El lenguaje sobre el que van a trabajar ambas lógicas es el mismo (ver Definición \ref{def:lenguaje}). Del mismo modo, la semántica puede verse en sendas definiciones, \ref{def:sintaxisFCA}, \ref{def:sintaxisFD}, para implicaciones\index{implicaciones} y DFs respectivamente. A continuación, se analizarán los sistemas axiomáticos y métodos de razonamiento. Para los siguientes apartados, y por facilitar la redacción y lectura, se utiliza el término implicaciones, siendo igualmente válido para DFs.


\subsection{Axiomas de Armstrong}
\label{subsec:axiomasArmstrong}
\noindent
Los denominados axiomas de Armstrong\index{Axiomas de Armstrong} son el primer sistema axiomático descrito para tratar sistemas de implicaciones utilizando la lógica \cite{Armstrong74}. Este sistema ha tenido una clara influencia en el diseño de varias lógicas sobre implicaciones, todas ellas construidas alrededor del paradigma de la transitividad \cite{Ibaraki1999,Atzeni1993,Paredaens1989}.

Este sistema axiomático\index{sistema axiomático} está formado por un esquema de axioma, denominado \textit{Reflexivo}: 

\begin{center}
	{\scriptsize \tt{[Ref]}}\ $\displaystyle\frac{}{AB \to A}$
\end{center}

y dos reglas de inferencia, \textit{Aumentativa} y \textit{Transitiva} que se definen como:

\begin{center}
	{\scriptsize \tt{[Aug]}}\ $\displaystyle\frac{A \to B}{AC \to BC}$ \quad
	{\scriptsize \tt{[Tran]}}\ $\displaystyle\frac{A \to B,\ B \to C}{A \to C}$ 
\end{center}

Para el sistema axiomático anterior, la noción de \textit{deducción} ($\vdash$) se define como:

\begin{definicion}
Se dice que una implicación $A\to B$ se deriva sintácticamente (o se deduce) de un sistema de implicaciones $\Sigma$, y se denota por $\Sigma\vdash A\to B$, si existe una secuencia de implicaciones $\sigma_1,\dots,\sigma_n \in \mathcal L_M$ tal que $\sigma_n=A\to B$ y, para todo $1\leq i\leq n$, la implicación $\sigma_i$ satisface una de las siguientes condiciones:
	\begin{itemize}
		\item $\sigma_i$ es un axioma, es decir, verifica el esquema {\tt [Ref]}.
		\item $\sigma_i\in \Sigma$.
		\item $\sigma_i$ se obtiene a partir de implicaciones pertenecientes a $\{\sigma_j\mid 1\le j<i\}$ aplicando las reglas de inferencia del sistema axiomático.
	\end{itemize}
\end{definicion}

La secuencia $\sigma_1,\dots,\sigma_n$ constituye una demostración para $\Sigma\vdash A\to B$

Los axiomas de Armstrong son un sistema axiomático correcto y completo tanto si se está trabajando con implicaciones en FCA \cite{Armstrong74} como con DFs en bases de datos relacionales \cite{Ganter1997}.

Debido al rol central que desempeña la transitividad en ese sistema axiomático, el desarrollo de métodos ejecutables para resolver problemas de implicaciones se ha mostrado infructuoso y se ha tenido que recurrir a métodos indirectos como se verá en la Sección \ref{sec:razonamientoAutomatico}. No obstante, como se ha mencionado, es un buen punto de partida para el desarrollo de nuevas lógicas para el tratamiento de las implicaciones\index{implicaciones}, en concreto, para la lógica \slfd, que se introduce a continuación.


\subsection{Lógica de Simplificación}
\label{subsec:logicaSLFD}
\noindent
La lógica \slfde no toma el paradigma de la transitividad como centro sino que se guía por la idea de simplificar el conjunto de implicaciones mediante la eliminación de atributos redundantes de manera eficiente \cite{Enciso2002}. Por consiguiente, la introducción de la lógica \slfde\index{\slfde} abrió la puerta al desarrollo de métodos de razonamiento automatizados directamente basados en su novedoso sistema axiomático \cite{CorderoEMG14, CorderoEMOR15}. La posibilidad de desarrollar estas aplicaciones ha sido la motivación principal para el desarrollo de esta tesis, buscando sobre todo, mejorar la eficacia y la eficiencia. 

Seguidamente, se va a comenzar definiendo su sistema axiomático\index{sistema axiomático} que, como ya se ha comentado, es válido para ambas semánticas (FCA, DFs) y además es común debido a que utilizan el mismo lenguaje.

\subsection*{Sistema Axiomático}
\noindent
\slfde se define como el par ($\mathcal L_M, S_{FD}$) donde $S_{FD}$ tiene el siguiente esquema de axioma:

\begin{center}
{\scriptsize \tt{[Ref]}}\quad $\displaystyle\frac{}{AB \to A}$  
\end{center}

\noindent
junto con las siguientes reglas de inferencia\index{reglas de inferencia}, denominadas \emph{fragmentación}\index{reglas de inferencia!fragmentación}, \emph{composición}\index{reglas de inferencia!composición} y \emph{simplificación}\index{reglas de inferencia!simplificación} respectivamente.

\begin{center}
	{\scriptsize \tt{[Frag]}}\ $\displaystyle\frac{A\to BC}{A\to B}$  \quad
	{\scriptsize \tt{[Comp]}}\ $\displaystyle\frac{A\to B,\ C \to D}{AC \to BD}$ \\ \vspace{0.4cm}
	{\scriptsize \tt{[Simp]}}\ Si $A\subseteq C, A\cap B=\varnothing$, $\displaystyle\frac{A\to B,\ C \to D}{A(C\smallsetminus B)\to D}$
\end{center}

\slfd\index{\slfde}, al igual que los axiomas de Armstrong, constituye una lógica correcta y completa tanto para implicaciones como DFs, tal y como los autores presentaron en \cite{Enciso2002} y como demuestra el siguiente teorema.

\begin{theorem}
Sea $M$ un conjunto finito no vacío de atributos, $\Sigma \subseteq \mathcal L_M$ y $A\to B \in \mathcal L_M$. Entonces, $\Sigma\models A\to B$ si y sólo si $\Sigma\vdash A\to B$.  
\end{theorem}

Se destaca que el lenguaje \slfde considera como fórmulas válidas aquellas en donde cualquiera de sus dos partes puede ser el conjunto vacío, es decir, de los tipos $A \to \varnothing$ y $\varnothing \to A$, tal y como los autores discutieron en \cite{Enciso2002}.

%\begin{theorem}
%Para cualquier $\varGamma$ y $\forall X, Y\subseteq M$, $\varGamma \vdash X\to Y$ si y sólo si $\varGamma \cup \{\top \to X\} \vdash\top \to Y$
%\end{theorem}

La principal ventaja de la lógica \slfde radica en que las reglas de inferencia pueden considerarse reglas de equivalencia. Como consecuencia, se ha podido utilizar como núcleo principal para el desarrollo de métodos automáticos para diversas aplicaciones (e.g. obtener claves minimales, cálculos del cierre) como se verá más adelante. Un estudio más detallado al respecto, incluyendo teoremas y sus demostraciones, puede verse en \cite{Mora2012}.

Para finalizar, estos sistemas axiomáticos se pueden utilizar para el desarrollo de métodos de razonamiento automático con los que resolver el denominado problema de la implicación tal y como se muestra en el siguiente apartado.



\section{Razonamiento Automático}
\label{sec:razonamientoAutomatico}
\noindent
Una vez introducido el lenguaje de la lógica, la semántica (en las dos acepciones que se han utilizado en esta tesis) y el sistema axiomático, se llega ahora a la última sección de estos preliminares. En ella se va a abordar la demostración automática a través del problema de la implicación y haciendo uso del cierre de atributos sobre el sistema axiomático.

%El problema de la implicación es crucial en el diseño de un sistema de razonamiento y como tal, existen desde hace años notables estudios al respecto en diferentes áreas \cite{Armstrong74,Beeri1977,Maier1979}.

Básicamente, el problema de la implicación es el siguiente: dado un conjunto de implicaciones\index{conjunto de implicaciones} $\Sigma$, determinar mediante la lógica si a partir de ese conjunto se puede inferir la validez de una nueva implicación dada $\Sigma\vdash A\to B$ \cite{Beeri1981,Mitchell1983,Maier1979}. %Dicho de otro modo, si tenemos el conjunto de implicaciones $\Sigma$, el problema consiste en comprobar si se verifica $\Sigma \vdash A \to B$ . %Para ello, se utilizarán los anteriores sistemas axiomáticos junto con una serie de nuevos elementos, como los conjuntos cerrados y los operadores de cierre, que darán paso a la utilización de métodos de razonamiento automático como se introducen a continuación.


%\subsection{Método de Razonamiento Automático}
%\label{subsec:metodoRazonamientoAutomatico}
%\noindent
%Claramente, la primera pregunta que surge es si el problema de las implicaciones tiene solución, es decir, si existe algún método que proporcione una respuesta positiva o negativa para cualquier instancia dada del problema. Para ello, un método es a través de axiomas. Un \textit{axioma de inferencia} es una regla que establece que si una relación satisface ciertas dependencias, entonces debe satisfacer otras. Dado un conjunto de implicaciones $\Sigma$ y un conjunto de axiomas de inferencia, el \textit{cierre} de $\Sigma$, denotado por $\Sigma^+$, es el menor conjunto que contiene a $\Sigma$ tal que no es posible aplicar los axiomas de inferencia para derivar una dependencia que no esté en $\Sigma$. En otras palabras, del conjunto $\Sigma$ se deriva una dependencia $\sigma$, denotado $\Sigma \vdash \sigma$, si $\sigma \in \Sigma^+$.

%Para cada conjunto de implicaciones, el sistema axiomático permite definir un operador de cierre en $2^M$ denominado \textit{cierre sintáctico}.

A continuación se introduce el cierre de atributos, que se utiliza como base para construir el demostrador automático.

\begin{definicion}%[Conjunto cerrado]
	Dado un conjunto $X\subseteq M$, llamamos cierre de $X$ sobre $\Sigma$ (notado $X^+_\Sigma$) como el mayor subconjunto de $M$ tal que $\Sigma \vdash X \to X^+_\Sigma$.
	
	%Dado un conjunto de implicaciones $\Sigma \subseteq \mathcal L_M$, un conjunto $X \subseteq M$ se dice cerrado respecto de $\Sigma$ si, para cada $A\to B\in \Sigma$, se cumple que $A \subseteq X$ implica $B \subseteq X$. 
\end{definicion}
	
%Debido a que $M$ es cerrado con respecto a $\Sigma$ se define el operador de cierre $(\ )^+_\Sigma\colon 2^M\to 2^M$ que permite obtener el menor cerrado como:

%\begin{definicion}[Operador de cierre]\index{operador de cierre}
%Sea $M$ un conjunto de atributos y $\Sigma \subseteq \mathcal L_M$. Para cada $X \subseteq M$, el cierre de $X$ respecto a $\Sigma$ se define como: 
%$$X^+_\Sigma=\bigcap\{Y\subseteq M\mid Y\text{ es cerrado respecto a }\Sigma\text{ y }X\subseteq Y \}$$
%\end{definicion}

%Por tanto, el cierre de $X$ con respecto a $\Sigma$ es el mayor subconjunto de $M$ tal que $\Sigma \vdash X \to X^+_\Sigma$.

La definición anterior de cierre sintáctico de atributos da lugar a un operador de cierre, siempre y cuando el conjunto $\Sigma$ sea un sistema de implicaciones completo (las implicaciones\index{implicaciones} deducibles del contexto formal son todas inferibles desde $\Sigma$). No se entra en detalle sobre estos aspectos formales en estos preliminares puesto que, en todo el trabajo, se parte de la noción de cierre sintáctico como base.

En \cite{Mora2012} los autores presentan un novedoso método para calcular el cierre de atributos sobre un conjunto de implicaciones\index{conjunto de implicaciones}, basado en la lógica \slfd.

%\begin{corolario}
%	Sea $\Sigma\subseteq \mathcal L_M$. $\forall X\subseteq M$, se tiene que 
%	$$
%	X^+_\Sigma=\max\{Y\subseteq M\mid \Sigma\vdash X\to Y \}.
%	$$
%\end{corolario}

Se pasa ahora a presentar los métodos de razonamiento utilizados en esta tesis doctoral: el cierre clásico de Maier \cite{Maier1983} como trabajo seminal de este área, y a continuación, el cierre \slfd, este último como núcleo principal del funcionamiento de los métodos diseñados y utilizados en las publicaciones que avalan este trabajo de tesis \cite{Benito-Picazo2016,Benito-Picazo2017,Benito-Picazo2018}.

Para abordar el problema de la implicación, se utiliza el cierre sintáctico a modo de demostrador automático, pues dado un conjunto de implicaciones $\Sigma$, debido a la definición de cerrado anterior, se tiene que $\Sigma\vdash A\to B$ si y sólo si $B\subseteq A^+_\Sigma$. Este resultado hace que la definición de un método para calcular el cierre sintáctico abra la puerta al tratamiento automático del problema de la implicación. Ello será el centro del siguiente apartado.


\subsection{Algoritmos para el Cálculo del Cierre}
\label{subsec:algoritmosCalculoCierre}
\noindent
El problema de la implicación se ha abordado tradicionalmente utilizando un método básico que recibe como entrada un conjunto de atributos $X\subseteq M$ y un conjunto de implicaciones $\Sigma\subseteq \mathcal L_M$ y utiliza de forma exhaustiva la relación de subconjunto recorriendo iterativamente $\Sigma$ y agregando nuevos elementos al cierre. Este método, fue propuesto en la década de 1970 por Maier \cite{Maier1983} y puede considerarse la base principal donde se han sustentado tantos otros. Su funcionamiento puede verse en detalle en el Algoritmo \ref{algoritmo:cierreUllman}\index{Cierre clásico}.

\begin{algorithm2e}
\DontPrintSemicolon
\KwData{$ \Sigma$, $A$}
\KwResult{$A^+_\Sigma$ }
    \Indp
    \Begin{
     $A^+_\Sigma:=A$
		
     \Repeat{$A^+_\Sigma=A^\prime$}{
        $A^\prime:=A^+_\Sigma$
				
       \ForEach{ $X \to Y \in  \Sigma$}{
           \If{($X \subseteq A^+_\Sigma$) {\bf y} ($Y\not\subseteq A^+_\Sigma$)}{
               $A^+_\Sigma:=A^+_\Sigma \cup \{Y\}$
           }%end if
       }% end foreach
		}%until 
   {\bf devolver} $A^+_\Sigma$
   }%end begin
 \caption{Cierre clásico}
 \label{algoritmo:cierreUllman}
\end{algorithm2e}

%Más tarde, varios autores han desarrollado otros métodos mediante el uso de diferentes técnicas, resolviendo eficientemente este problema en tiempo lineal. 

En \cite{Paredaens1989}, los autores muestran que la complejidad del problema del cierre es $\mathtt{O}(|A|\, |{ \Sigma}|)$. En \cite{Mora2012} se presentó el método del cierre basado en la lógica \slfd. En dicho trabajo además se muestra que dicho método presenta un mejor rendimiento que los métodos anteriores. Como novedad, la salida del nuevo método de cierre no es sólo el conjunto cerrado sino que también produce un conjunto de implicaciones que puede ser interpretado como el conocimiento que resta en el sistema y que complementa a los atributos que están en el cerrado.

%Además, como se muestra a continuación, en \cite{Mora2012}, los autores presentan un método de cierre de atributos estrechamente relacionado con el sistema axiomático \slfd. También se demuestra que el método tiene un mejor rendimiento que aquellos basados en el cierre clásico.


%\subsection*{Cierre \slfd}
%\label{subsec:cierreSLFD}
%\noindent
El método de razonamiento automático en \slfde se basa en el Teorema de la deducción\index{Teorema de la deducción} y un conjunto de equivalencias. Introduciremos ambas cosas antes de presentar el método. 

Siguiendo la forma habitual, dos sistemas de implicaciones $\Sigma_1,\Sigma_2\subseteq \mathcal L_M$ se dicen equivalentes si para toda implicación $A \to B$ de $\Sigma_1$, se tiene que $\Sigma_2\vdash A \to B$ y viceversa.

%Además, en \cite{Enciso2002} también se presentó el siguiente teorema, que no sólo es fundamental para calcular cierres sino para introducir un método de razonamiento automático, y que se conoce como Teorema de la deducción.

\begin{theorem}[Teorema de la deducción]\index{Teorema de la deducción}
\label{empty_set}
	Sea $A\to B\in\mathcal L_M$ y $\Sigma\subseteq \mathcal L_M$. Entonces, 
%\vspace*{-0.2cm}
	$$\Sigma \vdash A\to B \quad \mbox{si y sólo si} \quad \{\varnothing\to A\} \cup \Sigma \vdash\{\varnothing\to B\}$$
\end{theorem}

La siguiente proposición proporciona tres equivalencias, denominadas también: \textit{Fragmentación, Composición y Simplificación}.%, que se aplican y justifican el nombre de la lógica \slfd.% porque, leídas de izquierda a derecha, eliminan la información redundante en el sistema de implicaciones.

\begin{proposicion}\label{simpl_equiv}
	Sean $A,B,C,D\subseteq M$. Se verifican las siguientes equivalencias:
	\begin{enumerate}
		\item {\small$\{A\to B\}\equiv\{A\to B\smallsetminus A\}$}
		\item {\small$\footnotesize\{A\to B, A\to C\}\equiv\{A\to B\cup C\}$}
		\item {\small$\footnotesize\{A\to B, C \to D\}\equiv  \{A\to B, C\smallsetminus B\to D\smallsetminus B\}$ siendo $A\cap B=\varnothing$ y $A\subseteq C$}
\end{enumerate}
%
%\begin{equation*}
%\begin{split}
%\{X\to Y,\ U \to V\}& \equiv  \{X\to Y, (U-Y)\to(V-Y)\}\\
%\end{split}
%\end{equation*}
\end{proposicion}

Mediante el Teorema de la deducción y las equivalencias anteriores, se puede pasar de las reglas de inferencia del sistema axiomático clásico de Armstrong a un sistema que puede ser automatizable. En este punto aparece el cierre \slfd, que los autores denominaron {\tt Cls}\index{Cierre \slfd} \cite{Mora2012}, y que actúa según el siguiente procedimiento.

%Dado un conjunto $A\subseteq M$ y un conjunto de implicaciones $\Sigma$, {\tt Cls} calcula el par $(A^+_\Sigma,\Sigma^\prime)$, siendo $A^+_\Sigma$ el cierre sintáctico de $A$ con respecto a $\Sigma$, y $\Sigma^\prime$ el conjunto residual de implicaciones respecto a $\varnothing \to A^+_\Sigma$. Esto permite determinar si una implicación $A \to B$ puede deducirse de $\Sigma$.

Los pasos del algoritmo desglosados en lenguaje natural y de forma más detallada son:
\begin{enumerate}
 \item En primer lugar, se incluye la fórmula $\varnothing \to A$ en $\Sigma$ y se usa como semilla por el método de razonamiento mediante las equivalencias mencionadas en la proposición anterior.
 \item A continuación, el algoritmo entra en un proceso iterativo en el cual se irán aplicando las siguientes equivalencias hasta alcanzar un punto en el que no sea posible aplicar ninguna.
	\begin{itemize}
		\item {\bf Eq. I}: Si $B\subseteq A$ entonces $\{\emptyset\to A,B\to C\} \equiv \{\emptyset\to A\cup C\}$.
		\item {\bf Eq. II}: Si $C\subseteq A$ entonces $\{\emptyset\to A,B\to C\} \equiv \{\emptyset\to A\}$.
		\item {\bf Eq. III}: En otro caso  $\{\emptyset\to A,B\to C\} \equiv \{\emptyset\to A,B\smallsetminus A\to C\smallsetminus A\}$.
	\end{itemize} 
 \item En el momento en el que no sea posible aplicar ninguna de las equivalencias anteriores, el algoritmo termina.% dando como resultado el conjunto cierre $A^+_\Sigma$, es decir, el cierre sintáctico de $A$ con respecto a $\Sigma$, y además, el conjunto residual de implicaciones $\Sigma^\prime$.
\end{enumerate}

Formalmente, el algoritmo {\tt Cls} puede verse detalladamente en el pseudocódigo \ref{algoritmo:Cls}.

\begin{algorithm2e}
\DontPrintSemicolon
\KwData{$\Sigma$, $A$}
\KwResult{$A^+_\Sigma$, $\Sigma^\prime$}
    \Indp
    \Begin{
     $A^+_\Sigma:=A$
     
     $\Sigma^\prime:=\Sigma$
		
     \Repeat{$A^+_\Sigma=A^\prime$}{
        $A^\prime:=A^+_\Sigma$
				
       \ForEach{ $B \to C \in  \Sigma$}{
           \If{$B \subseteq A^+_\Sigma$}{
           		 \textbf{(Eq. I)}
           		 
               $A^+_\Sigma:=A^+_\Sigma \cup \{B\}$
               
               $\Sigma^\prime:=\Sigma^\prime \smallsetminus B \to C$
           }\ElseIf{$C \subseteq A^+_\Sigma$}{
           		 (\textbf{Eq. II)}
           		 
           		 $\Sigma^\prime:=\Sigma^\prime \smallsetminus B \to C$
           }\ElseIf{($B \cap A^+_\Sigma \neq \varnothing$) {\bf o} ($C \cap A^+_\Sigma \neq \varnothing$)}{
           		 \textbf{(Eq. III)}
           
           		 $\Sigma^\prime:=\Sigma^\prime \cup\{B\smallsetminus A^+_\Sigma\to C\smallsetminus A^+_\Sigma\}$
           }
       }% end foreach
		}%until 
   {\bf devolver} $A^+_\Sigma$, $\Sigma^\prime$
   }%end begin
 \caption{Cierre {\tt Cls}}
 \label{algoritmo:Cls}
\end{algorithm2e}



%\begin{function}[h]
%\caption{Cls($A$,$\Sigma$) }\label{algoritmo:Cls}
%\small
%\DontPrintSemicolon
%\SetKwInOut{Input}{input}
%\SetKwInOut{Output}{output}
%\Input{$A$, conjunto de atributos sobre los que se quiere calcular el cierre; \\
%$\Sigma$, un sistema de implicaciones;}
%\Output{$A^+_\Sigma$, cierre sintáctico de $A$ con respecto a $\Sigma$; \\ 
%$\Sigma$, el sistema de implicaciones residual;}
% 
% 
%%    \Begin{
%
%\Repeat{$\Sigma=\Sigma$}{
%$\Sigma:=\Sigma$
%
%$\Sigma:=\varnothing$
%
%
%\ForEach{$B\to C\in \Sigma$}{
%\lIf{$B\subseteq A$}{
%
%\ \ \ \ {$A:=A\cup B$}
%}
%\lElseIf{$C\not\subseteq A$}{
%
%\ \ \ \ {$\Sigma:=\Sigma\cup\{B\smallsetminus A\to C\smallsetminus A\}$}
%}
%}
%}
% 
%     \Return $(A,\Sigma)$   
% 
%
%\end{function}


Aunque es cierto que existen en la literatura numerosas propuestas de algoritmos para calcular el cierre (la mayoría de ellas como modificaciones del cierre clásico de Maier \cite{Maier1983}), la principal novedad y ventaja que aporta {\tt Cls} es que, aparte del cálculo del cierre, y de manera simultánea, también se calcula el conjunto reducido de implicaciones, guardando de esta forma el conocimiento complementario que describe la información que no pertenece al cierre. Este hecho conduce sin lugar a dudas a una posición privilegiada, ya que evita el elevado coste de minería de datos para extraer el nuevo conjunto de implicaciones\index{conjunto de implicaciones} para el \textit{dataset} reducido después de cada aplicación del método, algo imprescindible con las implementaciones clásicas. Esta característica del algoritmo es la que se ha explotado ampliamente en los resultados obtenidos a lo largo de esta tesis doctoral.

Para finalizar este apartado, se muestra el siguiente ejemplo básico de aplicación del algoritmo {\tt Cls} propuesto.

\begin{ejemplo}
\label{ejemplo:basico} 
	Sean $\Sigma=\{ak\to bc, cd\to gh, cij\to kl, de\to f, g\to de, hf\to ia, f\to c\}$ y $A=\{adf\}$. 
	
	La siguiente tabla muestra la traza de ejecución paso a paso del algoritmo.
	
{\small
$$
\begin{array}{c|ccccccc}
\hline
 & \multicolumn{7}{c}{Iteraci\acute{o}n \quad 0} \\
%\hline
\Sigma^\prime & ak\to bc & cd\to gh & cij\to kl & de\to f & g\to de & hf\to ia & f\to c \\
A^+_\Sigma & adf\\
\hline
 & \multicolumn{7}{c}{Iteraci\acute{o}n \quad 1} \\
\Sigma^\prime & k\to bc & c\to gh & cij\to kl & \times & g\to e & h\to i & \times\\
Eq & III & III & - & II & III & III & I\\
A^+_\Sigma & & & & & & & acdf\\
\hline
 & \multicolumn{7}{c}{Iteraci\acute{o}n \quad 2} \\
\Sigma^\prime & k\to b & \times & ij\to kl &  & \times & \times & \\
Eq & III & I & III & & I & I & \\
A^+_\Sigma & & acdfgh &  &  & acdefgh & acdefghi & \\
\hline
 & \multicolumn{7}{c}{Iteraci\acute{o}n \quad 3} \\
\Sigma^\prime & k\to b &  & j\to kl &  &  &  & \\
Eq & - &  & - &  &  &  & \\
A^+_\Sigma & \textbf{acdefghi} &  &  &  &  &  & \\
\hline
\end{array}
$$
}%end small
 
El resultado del algoritmo {\tt Cls} es:
\begin{itemize}
	\item En primer lugar, el cierre $A^+_\Sigma=\{a,c,d,e,f,g,h,i\}$.
	\item Y en segundo lugar y muy importante tal y como se ha mencionado, el nuevo conjunto reducido de implicaciones $\Sigma^\prime = \{k \to b, j \to kl\}$, que contiene la información que no pertenece al cierre.
\end{itemize}


%{\small
%$$
%\begin{array}{c|lllllll}
%\hline
%A^+_\Sigma & \multicolumn{7}{c}{\Sigma^\prime} \\
%\hline
%Iter\. 0 \\
%\hline
%\emptyset\to adf & ak\to bc & cd\to gh & cij\to kl & de\to f & g\to de & hf\to ia & f\to c \\
%Iter. 1 \\
%Equiv\. & k\to bc & c\to gh & cij\to kl & x & g\to e & h\to i & x\\
%\hline
%\hline
%\emptyset\to ce &   & a\to \!\!\not\! c & b\!\!\not\! c\to d & \!\!\not\! c\to a\!\!\not\! e& d\to \!\!\not\! e \\
%\emptyset\to ace &   &  & b\to d & & \\
%%\emptyset\to acef &   &  & b\to d &  & \\
%\hline
%\end{array}
%$$
%}%end small

%Una vez finalizado la ejecución del algoritmo, se obtiene: ${\tt Cls}(\{c,e\},\{a\to c, bc\to d, c\to ae, d\to e\})=(\{a,c,e\},\{b\to d\})$, donde el cierre es $\{c,e\}^+_\Sigma = \{a,c,e\}$  y el conjunto residual de implicaciones queda como:  $\Sigma^\prime = \{b \to d\}$.
\end{ejemplo}


%\begin{ejemplo}
%\label{ejemplo:basico} 
%	Sean $\Sigma=\{a\to c, bc\to d, c\to ae, d\to e\}$ y $A=\{c,e\}$. El algoritmo {\tt Cls} devuelve $A^+=\{a,c,e\}$. La siguiente tabla muestra la traza de ejecución paso a paso del algoritmo. 
%
%%{\small
%$$\begin{array}{l||lllll}
%\hline
%Guide &  & \multicolumn{4}{c}{\Sigma } \\
%%\hline
%\emptyset\to ce &  & a\to c \quad& bc\to d \quad& c\to ae\quad& d\to e \quad\\
%\hline
%\hline
%\emptyset\to ce &   & a\to \!\!\not\! c & b\!\!\not\! c\to d & \!\!\not\! c\to a\!\!\not\! e& d\to \!\!\not\! e \\
%\emptyset\to ace &   &  & b\to d & & \\
%%\emptyset\to acef &   &  & b\to d &  & \\
%\hline
%\end{array}
%$$
%%}%end small
%
%Una vez finalizado la ejecución del algoritmo, se obtiene: ${\tt Cls}(\{c,e\},\{a\to c, bc\to d, c\to ae, d\to e\})=(\{a,c,e\},\{b\to d\})$, donde el cierre es $\{c,e\}^+_\Sigma = \{a,c,e\}$  y el conjunto residual de implicaciones queda como:  $\Sigma^\prime = \{b \to d\}$.
%\end{ejemplo}

% =====================================================================
% =====================================================================
% =====================================================================

